"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[70158,69632],{51853:function(t,e,n){n.d(e,{A:function(){return a}});n(81027);var i=function(t){return t<10?"0".concat(t):t};function a(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),a=Math.floor(t%3600%60);return e>0?"".concat(e,":").concat(i(n),":").concat(i(a)):n>0?"".concat(n,":").concat(i(a)):a>0?""+a:null}},2851:function(t,e,n){n.d(e,{PF:function(){return u},CR:function(){return r},pZ:function(){return s},kL:function(){return a},ls:function(){return o},r9:function(){return c}});n(81027),n(26098),n(97741),n(29193),n(16891);var i=n(51853),a=function(t){return t.callWS({type:"timer/list"})},r=function(t,e){return t.callWS(Object.assign({type:"timer/create"},e))},c=function(t,e,n){return t.callWS(Object.assign({type:"timer/update",timer_id:e},n))},s=function(t,e){return t.callWS({type:"timer/delete",timer_id:e})},o=function(t){if(t.attributes.remaining){var e,n,i=(e=t.attributes.remaining,3600*(n=e.split(":").map(Number))[0]+60*n[1]+n[2]);if("active"===t.state){var a=(new Date).getTime(),r=new Date(t.last_changed).getTime();i=Math.max(i-(a-r)/1e3,0)}return i}},u=function(t,e,n){if(!e)return null;if("idle"===e.state||0===n)return t.formatEntityState(e);var a=(0,i.A)(n||0)||"0";return"paused"===e.state&&(a="".concat(a," (").concat(t.formatEntityState(e),")")),a}},70158:function(t,e,n){var i=n(22858).A,a=n(33994).A;n.a(t,function(){var t=i(a().mark((function t(i,r){var c,s,o,u,l,h,d,f,v,m,k,p,y,g,_,A;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.r(e),c=n(64599),s=n(35806),o=n(71008),u=n(62193),l=n(2816),h=n(27927),d=n(71499),f=n(81027),v=n(15112),m=n(29818),n(69632),k=n(7934),p=n(69743),y=n(46645),!(g=i([p])).then){t.next=26;break}return t.next=22,g;case 22:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=27;break;case 26:t.t0=g;case 27:p=t.t0[0],(0,h.A)([(0,m.EM)("hui-timer-entity-row")],(function(t,e){var n=function(e){function n(){var e;(0,o.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=(0,u.A)(this,n,[].concat(a)),t(e),e}return(0,l.A)(n,e),(0,s.A)(n)}(e);return{F:n,d:[{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"_config",value:void 0},{kind:"method",key:"setConfig",value:function(t){if(!t)throw new Error("Invalid configuration");this._config=t}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return v.s6;var t=this.hass.states[this._config.entity];return t?(0,v.qy)(A||(A=(0,c.A)([' <hui-generic-entity-row .hass="','" .config="','"> <div class="text-content"> <ha-timer-remaining-time .hass="','" .stateObj="','"></ha-timer-remaining-time> </div> </hui-generic-entity-row> '])),this.hass,this._config,this.hass,t):(0,v.qy)(_||(_=(0,c.A)([" <hui-warning> "," </hui-warning> "])),(0,y.j)(this.hass,this._config.entity))}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,k.LX)(this,t)}}]}}),v.WF),r(),t.next=35;break;case 32:t.prev=32,t.t2=t.catch(0),r(t.t2);case 35:case"end":return t.stop()}}),t,null,[[0,32]])})));return function(e,n){return t.apply(this,arguments)}}())},69632:function(t,e,n){n.r(e);var i=n(35806),a=n(71008),r=n(62193),c=n(2816),s=n(27927),o=n(14562),u=n(19867),l=(n(81027),n(15112)),h=n(29818),d=n(2851);(0,s.A)([(0,h.EM)("ha-timer-remaining-time")],(function(t,e){var n=function(e){function n(){var e;(0,a.A)(this,n);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return e=(0,r.A)(this,n,[].concat(c)),t(e),e}return(0,c.A)(n,e),(0,i.A)(n)}(e);return{F:n,d:[{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"timeRemaining",value:void 0},{kind:"field",key:"_updateRemaining",value:void 0},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"update",value:function(t){var e;(0,o.A)((0,u.A)(n.prototype),"update",this).call(this,t),this.innerHTML=null!==(e=(0,d.PF)(this.hass,this.stateObj,this.timeRemaining))&&void 0!==e?e:"-"}},{kind:"method",key:"connectedCallback",value:function(){(0,o.A)((0,u.A)(n.prototype),"connectedCallback",this).call(this),this.stateObj&&this._startInterval(this.stateObj)}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.A)((0,u.A)(n.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"willUpdate",value:function(t){(0,o.A)((0,u.A)(n.prototype),"willUpdate",this).call(this,t),t.has("stateObj")&&this._startInterval(this.stateObj)}},{kind:"method",key:"_clearInterval",value:function(){this._updateRemaining&&(clearInterval(this._updateRemaining),this._updateRemaining=null)}},{kind:"method",key:"_startInterval",value:function(t){var e=this;this._clearInterval(),this._calculateRemaining(t),"active"===t.state&&(this._updateRemaining=setInterval((function(){return e._calculateRemaining(e.stateObj)}),1e3))}},{kind:"method",key:"_calculateRemaining",value:function(t){this.timeRemaining=(0,d.ls)(t)}}]}}),l.mN)}}]);
//# sourceMappingURL=70158.0hybHLMHWKI.js.map