"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[47083],{47083:function(t,e,i){var n=i(22858).A,r=i(33994).A;i.a(t,function(){var t=n(r().mark((function t(n,s){var a,o,c,h,d,u,l,f,p,v,_,k,m,y,g,x,w,b,A,E,C,S,I,M,z,O,j,P,Z,q,F,H,J,L;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i.r(e),i.d(e,{HuiStatisticCard:function(){return L}}),a=i(64599),o=i(33994),c=i(22858),h=i(35806),d=i(71008),u=i(62193),l=i(2816),f=i(27927),p=i(14562),v=i(19867),_=i(71499),k=i(81027),m=i(95737),y=i(50693),g=i(39790),x=i(66457),w=i(99019),b=i(96858),A=i(15112),E=i(29818),C=i(38962),S=i(34897),I=i(26175),M=i(57636),i(13292),i(13082),i(70857),z=i(4826),O=i(42183),j=i(18102),P=i(7934),Z=i(32064),!(q=n([M])).then){t.next=51;break}return t.next=47,q;case 47:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=52;break;case 51:t.t0=q;case 52:M=t.t0[0],L=(0,f.A)([(0,E.EM)("hui-statistic-card")],(function(t,e){var n,r,s,f,_=function(e){function i(){var e;(0,d.A)(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=(0,u.A)(this,i,[].concat(r)),t(e),e}return(0,l.A)(i,e),(0,h.A)(i)}(e);return{F:_,d:[{kind:"method",static:!0,key:"getConfigElement",value:(f=(0,c.A)((0,o.A)().mark((function t(){return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([i.e(9421),i.e(50911)]).then(i.bind(i,89052));case 2:return t.abrupt("return",document.createElement("hui-statistic-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,i){return{entity:(0,j.B)(t,1,e,i,["sensor"],(function(t){return"state_class"in t.attributes}))[0]||"",period:{calendar:{period:"month"}}}}},{kind:"field",decorators:[(0,E.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_value",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_metadata",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_error",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_footerElement",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,p.A)((0,v.A)(_.prototype),"disconnectedCallback",this).call(this),clearInterval(this._interval)}},{kind:"method",key:"setConfig",value:function(t){if(!t.entity)throw new Error("Entity must be specified");if(!t.stat_type)throw new Error("Statistic type must be specified");if(!t.period)throw new Error("Period must be specified");if(t.entity&&!(0,z.OQ)(t.entity)&&!(0,I.n)(t.entity))throw new Error("Invalid entity");this._config=t,this._error=void 0,this._fetchStatistic(),this._fetchMetadata(),this._config.footer?this._footerElement=(0,Z.x)(this._config.footer):this._footerElement&&(this._footerElement=void 0)}},{kind:"method",key:"getCardSize",value:(s=(0,c.A)((0,o.A)().mark((function t(){var e,i;return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=2,!this._footerElement){t.next=12;break}if(i=(0,O.Z)(this._footerElement),t.t0=e,!(i instanceof Promise)){t.next=10;break}return t.next=7,i;case 7:t.t1=t.sent,t.next=11;break;case 10:t.t1=i;case 11:e=t.t0+=t.t1;case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return A.s6;if(this._error)return(0,A.qy)(F||(F=(0,a.A)([' <ha-alert alert-type="error">',"</ha-alert> "])),this._error);var t=this.hass.states[this._config.entity],e=this._config.name||(0,z.$O)(this.hass,this._config.entity,this._metadata);return(0,A.qy)(H||(H=(0,a.A)([' <ha-card @click="','" tabindex="0"> <div class="header"> <div class="name" .title="','">','</div> <div class="icon"> <ha-state-icon .icon="','" .stateObj="','" .hass="','"></ha-state-icon> </div> </div> <div class="info"> <span class="value">','</span> <span class="measurement">',"</span> </div> "," </ha-card> "])),this._handleClick,e,e,this._config.icon,t,this.hass,void 0===this._value?"":null===this._value?"?":(0,M.ZV)(this._value,this.hass.locale),this._config.unit||(0,z.JE)(this.hass,this._config.entity,this._metadata),this._footerElement)}},{kind:"method",key:"shouldUpdate",value:function(t){return this._footerElement&&(this._footerElement.hass=this.hass),!!(t.has("_value")||t.has("_metadata")||t.has("_error"))||(!this._config||(0,P.LX)(this,t))}},{kind:"method",key:"firstUpdated",value:function(){this._fetchStatistic(),this._fetchMetadata()}},{kind:"method",key:"updated",value:function(t){if((0,p.A)((0,v.A)(_.prototype),"updated",this).call(this,t),this._config&&this.hass){var e=t.get("hass"),i=t.get("_config");e&&i&&e.themes===this.hass.themes&&i.theme===this._config.theme||(0,C.Q)(this,this.hass.themes,this._config.theme)}}},{kind:"method",key:"_fetchStatistic",value:(r=(0,c.A)((0,o.A)().mark((function t(){var e,i=this;return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hass&&this._config){t.next=2;break}return t.abrupt("return");case 2:return clearInterval(this._interval),this._interval=window.setInterval((function(){return i._fetchStatistic()}),3e5),t.prev=4,t.next=7,(0,z.pJ)(this.hass,this._config.entity,this._config.period);case 7:e=t.sent,this._value=e[this._config.stat_type],this._error=void 0,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),this._error=t.t0.message;case 15:case"end":return t.stop()}}),t,this,[[4,12]])}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"_fetchMetadata",value:(n=(0,c.A)((0,o.A)().mark((function t(){var e;return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hass&&this._config){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,z.Wr)(this.hass,[this._config.entity]);case 5:if(t.t1=e=t.sent,t.t0=null===t.t1,t.t0){t.next=9;break}t.t0=void 0===e;case 9:if(!t.t0){t.next=13;break}t.t2=void 0,t.next=14;break;case 13:t.t2=e[0];case 14:this._metadata=t.t2,t.next=20;break;case 17:t.prev=17,t.t3=t.catch(2),this._error=t.t3.message;case 20:case"end":return t.stop()}}),t,this,[[2,17]])}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_handleClick",value:function(){(0,S.r)(this,"hass-more-info",{entityId:this._config.entity})}},{kind:"method",key:"getLayoutOptions",value:function(){return{grid_columns:2,grid_rows:2,grid_min_columns:2,grid_min_rows:2}}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,A.AH)(J||(J=(0,a.A)(["ha-card{height:100%;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;outline:0}.header{display:flex;padding:8px 16px 0;justify-content:space-between}.name{color:var(--secondary-text-color);line-height:40px;font-weight:500;font-size:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.icon{color:var(--state-icon-color,#44739e);line-height:40px}.info{padding:0px 16px 16px;margin-top:-4px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:28px}.value{font-size:28px;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial}.measurement{font-size:18px;color:var(--secondary-text-color)}"])))]}}]}}),A.WF),s(),t.next=60;break;case 57:t.prev=57,t.t2=t.catch(0),s(t.t2);case 60:case"end":return t.stop()}}),t,null,[[0,57]])})));return function(e,i){return t.apply(this,arguments)}}())}}]);
//# sourceMappingURL=47083.rVQtLNeYBgM.js.map