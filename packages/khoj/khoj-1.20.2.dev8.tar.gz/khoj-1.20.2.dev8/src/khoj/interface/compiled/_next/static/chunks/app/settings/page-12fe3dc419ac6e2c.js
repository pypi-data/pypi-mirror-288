(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6938],{62960:function(e,t,s){Promise.resolve().then(s.bind(s,95982))},69591:function(e,t,s){"use strict";s.d(t,{EK:function(){return i},LF:function(){return r},k6:function(){return o}});var n=s(29039);let a=()=>window.fetch("https://ipapi.co/json").then(e=>e.json()).catch(e=>console.log(e)),r=e=>e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function i(){console.log("%c %s","font-family:monospace",'\n        __  __     __  __     ______       __        _____      __\n       /\\ \\/ /    /\\ \\_\\ \\   /\\  __ \\     /\\ \\      /\\  __ \\   /\\ \\\n       \\ \\  _"-.  \\ \\  __ \\  \\ \\ \\/\\ \\   _\\_\\ \\     \\ \\  __ \\  \\ \\ \\\n        \\ \\_\\ \\_\\  \\ \\_\\ \\_\\  \\ \\_____\\ /\\_____\\     \\ \\_\\ \\_\\  \\ \\_\\\n         \\/_/\\/_/   \\/_/\\/_/   \\/_____/ \\/_____/      \\/_/\\/_/   \\/_/\n\n\n       Greetings traveller,\n\n       I am ✨Khoj✨, your open-source, personal AI copilot.\n\n       See my source code at https://github.com/khoj-ai/khoj\n       Read my operating manual at https://docs.khoj.dev\n       ')}function o(){let{data:e,error:t}=(0,n.ZP)("/api/ip",a,{revalidateOnFocus:!1});return t||!e?null:e}},95982:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eo}});var n,a,r=s(57437),i=s(55268),o=s.n(i);s(80541);var l=s(2265),c=s(35657),d=s(79306),h=s(69591),m=s(19748),u=s(50495),x=s(66431),p=s(32309),f=s(37440);let j=l.forwardRef((e,t)=>{let{className:s,containerClassName:n,...a}=e;return(0,r.jsx)(x.uZ,{ref:t,containerClassName:(0,f.cn)("flex items-center gap-2 has-[:disabled]:opacity-50",n),className:(0,f.cn)("disabled:cursor-not-allowed",s),...a})});j.displayName="InputOTP";let g=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,f.cn)("flex items-center",s),...n})});g.displayName="InputOTPGroup";let b=l.forwardRef((e,t)=>{let{index:s,className:n,...a}=e,{char:i,hasFakeCaret:o,isActive:c}=l.useContext(x.VM).slots[s];return(0,r.jsxs)("div",{ref:t,className:(0,f.cn)("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",c&&"z-10 ring-2 ring-ring ring-offset-background",n),...a,children:[i,o&&(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});b.displayName="InputOTPSlot",l.forwardRef((e,t)=>{let{...s}=e;return(0,r.jsx)("div",{ref:t,role:"separator",...s,children:(0,r.jsx)(p.Z,{})})}).displayName="InputOTPSeparator";var _=s(83102),y=s(36013),w=s(46910);let N=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,f.cn)("w-full caption-bottom text-sm",s),...n})})});N.displayName="Table",l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("thead",{ref:t,className:(0,f.cn)("[&_tr]:border-b",s),...n})}).displayName="TableHeader";let v=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,f.cn)("[&_tr:last-child]:border-0",s),...n})});v.displayName="TableBody",l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,f.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...n})}).displayName="TableFooter";let k=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("tr",{ref:t,className:(0,f.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...n})});k.displayName="TableRow",l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("th",{ref:t,className:(0,f.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...n})}).displayName="TableHead";let S=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("td",{ref:t,className:(0,f.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...n})});S.displayName="TableCell",l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("caption",{ref:t,className:(0,f.cn)("mt-4 text-sm text-muted-foreground",s),...n})}).displayName="TableCaption";var T=s(42491),C=s(84120),F=s(55362),D=s(48252),E=s(60787),P=s(26058),O=s(95616),A=s(11961),I=s(76782),z=s(98325),Y=s(96917),Z=s(10813),K=s(56194),R=s(9476),W=s(43010),L=s(72151),M=s(53876),V=s(90445),U=s(17541),B=s(63205),G=s(9950),H=s(49806),J=s(35418),q=s(67722),X=s(57087),$=s(15340),Q=s(27082),ee=s(26100),et=s(48861),es=s(58485),en=s(47947);let ea=e=>{let{onClose:t}=e,[s,n]=(0,l.useState)([]),[a,i]=(0,l.useState)([]),[o,c]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/content/computer");if(!e.ok)throw Error("Failed to fetch files");let t=await e.json();Array.isArray(t)?n(t.toSorted()):console.error("Unexpected data format from API")}catch(e){console.error("Error fetching files:",e)}})()},[]);let d=s.filter(e=>e.toLowerCase().includes(o.toLowerCase())),h=async()=>{let e=a.length>0?a:d;if(console.log("Delete selected files",e),0===e.length){console.log("No files to delete");return}try{if(!(await fetch("/api/content/files",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:e})})).ok)throw Error("Failed to delete files");n(t=>t.filter(t=>!e.includes(t))),i([]),console.log("Deleted files:",e)}catch(e){console.error("Error deleting files:",e)}},m=async e=>{console.log("Delete selected file",e);try{if(!(await fetch("/api/content/file?filename=".concat(encodeURIComponent(e)),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to delete file");n(t=>t.filter(t=>t!==e)),i(t=>t.filter(t=>t!==e)),console.log("Deleted file:",e)}catch(e){console.error("Error deleting file:",e)}};return(0,r.jsx)(T.m5,{open:!0,onOpenChange:t,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"flex-none p-4 bg-background border-b",children:(0,r.jsx)(T.sZ,{placeholder:"Find synced files",value:o,onValueChange:c})}),(0,r.jsx)("div",{className:"flex-grow overflow-auto",children:(0,r.jsxs)(T.e8,{children:[(0,r.jsx)(T.rb,{children:"No such files synced."}),(0,r.jsx)(T.fu,{heading:"Synced files",children:d.map(e=>(0,r.jsx)(T.di,{value:e,onSelect:e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center ".concat(a.includes(e)?"font-semibold":""),children:[a.includes(e)&&(0,r.jsx)(C.J,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"break-all",children:e})]}),(0,r.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>m(e),className:"ml-auto",children:(0,r.jsx)(F.r,{className:"h-4 w-4"})})]})},e))})]})}),(0,r.jsx)("div",{className:"flex-none p-4 bg-background border-t",children:(0,r.jsx)("div",{className:"flex justify-between",children:(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:h,className:"mr-2",children:[(0,r.jsx)(F.r,{className:"h-4 w-4 mr-2"}),a.length>0?"Delect Selected (".concat(a.length,")"):"Delete All"]})})})]})})},er=e=>{var t,s;let{items:n,selected:a,callbackFunc:i}=e,[o,c]=(0,l.useState)(null!==(s=null==a?void 0:a.toString())&&void 0!==s?s:"0");return!!a&&(0,r.jsx)("div",{className:"overflow-hidden shadow-md rounded-lg",children:(0,r.jsxs)(w.h_,{children:[(0,r.jsx)(w.$F,{asChild:!0,className:"w-full rounded-lg",children:(0,r.jsxs)(u.z,{variant:"outline",className:"justify-start py-6 rounded-lg",children:[null===(t=n.find(e=>e.id.toString()===o))||void 0===t?void 0:t.name," ",(0,r.jsx)(D.p,{className:"h-4 w-4 ml-auto text-muted-foreground"})]})}),(0,r.jsx)(w.AW,{children:(0,r.jsx)(w._x,{value:o,onValueChange:async e=>{c(e),await i(e)},children:n.map(e=>(0,r.jsx)(w.qB,{value:e.id.toString(),children:e.name},e.id.toString()))})})]})})},ei=()=>{let[e,t]=(0,l.useState)([]),{toast:s}=(0,c.pm)(),n=async()=>{try{let e=await fetch("/auth/token",{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();t(e=>[...e,s])}catch(e){console.error("Error generating API key:",e)}},a=async e=>{try{await navigator.clipboard.writeText(e),s({title:"\uD83D\uDD11 API Key",description:"Copied to clipboard"})}catch(e){console.error("Error copying API key:",e)}},r=async e=>{try{(await fetch("/auth/token?token=".concat(e),{method:"DELETE"})).ok&&t(t=>t.filter(t=>t.token!==e))}catch(e){console.error("Error deleting API key:",e)}},i=async()=>{try{let e=await fetch("/auth/token"),s=await e.json();(null==s?void 0:s.length)>0&&t(s)}catch(e){console.error("Error listing API keys:",e)}};return(0,l.useEffect)(()=>{i()},[]),{apiKeys:e,generateAPIKey:n,copyAPIKey:a,deleteAPIKey:r}};function eo(){let[e,t]=(0,l.useState)("Settings"),[s,n]=(0,l.useState)(!1),{apiKeys:a,generateAPIKey:i,copyAPIKey:x,deleteAPIKey:p}=ei(),{userConfig:f}=(0,d.h)(!0),[w,T]=(0,l.useState)(null),[C,D]=(0,l.useState)(void 0),[eo,el]=(0,l.useState)(null),[ec,ed]=(0,l.useState)(void 0),[eh,em]=(0,l.useState)(""),[eu,ex]=(0,l.useState)("verified"),[ep,ef]=(0,l.useState)(!1),{toast:ej}=(0,c.pm)(),eg="w-full lg:w-1/3 grid grid-flow-column border border-gray-300 shadow-md rounded-lg bg-gradient-to-b from-background to-gray-50 dark:to-gray-950";(0,l.useEffect)(()=>{var e;T(f),ed(null==f?void 0:f.phone_number),ex((null==f?void 0:f.is_phone_number_verified)?"verified":(null==f?void 0:f.phone_number)?"otp":"setup"),D(null==f?void 0:f.given_name),el(null!==(e=null==f?void 0:f.notion_token)&&void 0!==e?e:null)},[f]),(0,l.useEffect)(()=>{n(window.innerWidth<786);let e=()=>n(window.innerWidth<786);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let eb=async()=>{try{if(!(await fetch("/api/phone?phone_number=".concat(ec),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to send OTP");ex("verify")}catch(e){console.error("Error sending OTP:",e),ej({title:"\uD83D\uDCF1 Phone",description:"Failed to send OTP. Try again or contact us at team@khoj.dev"})}},e_=async()=>{try{if(!(await fetch("/api/phone/verify?code=".concat(eh),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to verify OTP");ex("verified"),ej({title:"\uD83D\uDCF1 Phone",description:"Phone number verified"})}catch(e){console.error("Error verifying OTP:",e),ej({title:"\uD83D\uDCF1 Phone",description:"Failed to verify OTP. Try again or contact us at team@khoj.dev"})}},ey=async()=>{try{if(!(await fetch("/api/phone",{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to disconnect phone number");ed(void 0),ex("setup"),ej({title:"\uD83D\uDCF1 Phone",description:"Phone number disconnected"})}catch(e){console.error("Error disconnecting phone number:",e),ej({title:"\uD83D\uDCF1 Phone",description:"Failed to disconnect phone number. Try again or contact us at team@khoj.dev"})}},ew=async e=>{try{let t="/api/subscription?email=".concat(null==w?void 0:w.username,"&operation=").concat(e);if(!(await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to change subscription");w&&(w.subscription_state="cancel"===e?"unsubscribed":"subscribed",T(w)),ej({title:"\uD83D\uDCB3 Subscription",description:(null==w?void 0:w.subscription_state)==="unsubscribed"?"Your subscription was cancelled":"Your Futurist subscription has been renewed"})}catch(t){console.error("Error changing subscription:",t),ej({title:"\uD83D\uDCB3 Subscription",description:"cancel"===e?"Failed to cancel subscription. Try again or contact us at team@khoj.dev":"Failed to renew subscription. Try again or contact us at team@khoj.dev"})}},eN=async()=>{if(C)try{if(!(await fetch("/api/user/name?name=".concat(C),{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to update name");w&&(w.given_name=C,T(w)),ej({title:"✅ Updated Profile",description:"You name has been updated to ".concat(C)})}catch(e){console.error("Error updating name:",e),ej({title:"⚠️ Failed to Update Profile",description:"Failed to update name. Try again or contact team@khoj.dev"})}},ev=e=>async t=>{if((null==w?void 0:w.is_active)||"search"===e)try{if(!(await fetch("/api/model/".concat(e,"?id=")+t,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to update model");ej({title:"✅ Updated ".concat((0,h.LF)(e)," Model")})}catch(t){console.error("Failed to update ".concat(e," model:"),t),ej({description:"❌ Failed to update ".concat((0,h.LF)(e)," model. Try again."),variant:"destructive"})}},ek=async()=>{if(eo)try{if(!(await fetch("/api/content/notion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:eo})})).ok)throw Error("Failed to save Notion API key");w&&(w.notion_token=eo,T(w)),ej({title:"✅ Saved Notion Settings",description:"You Notion API key has been saved."})}catch(e){console.error("Error updating name:",e),ej({title:"⚠️ Failed to Save Notion Settings",description:"Failed to save Notion API key. Try again or contact team@khoj.dev"})}},eS=async e=>{try{if(!(await fetch("/api/content?t=".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to sync content from ".concat(e));ej({title:"\uD83D\uDD04 Syncing ".concat(e),description:"Your ".concat(e," content is being synced.")})}catch(t){console.error("Error syncing content:",t),ej({title:"⚠️ Failed to Sync ".concat(e),description:"Failed to sync ".concat(e," content. Try again or contact team@khoj.dev")})}},eT=async e=>{try{if(!(await fetch("/api/content/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to disconnect ".concat(e));w&&("computer"===e?w.enabled_content_source.computer=!1:"notion"===e?(w.enabled_content_source.notion=!1,w.notion_token=null,el(w.notion_token)):"github"===e&&(w.enabled_content_source.github=!1),T(w)),"computer"===e?ej({title:"✅ Deleted Synced Files",description:"Your synced documents have been deleted."}):ej({title:"✅ Disconnected ".concat(e),description:"Your ".concat(e," integration to Khoj has been disconnected.")})}catch(t){console.error("Error disconnecting ".concat(e,":"),t),ej({title:"⚠️ Failed to Disconnect ".concat(e),description:"Failed to disconnect from ".concat(e,". Try again or contact team@khoj.dev")})}};return w?(0,r.jsxs)("div",{className:o().page,children:[(0,r.jsx)("title",{children:e}),(0,r.jsx)("div",{className:o().sidePanel,children:(0,r.jsx)(et.Z,{conversationId:null,uploadedFiles:[],isMobileWidth:s})}),(0,r.jsx)("div",{className:o().content,children:(0,r.jsx)("div",{className:"".concat(o().contentBody," mx-10 my-2"),children:(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)(es.Z,{}),children:(0,r.jsxs)("div",{id:"content",className:"grid grid-flow-column sm:grid-flow-row gap-16 m-8",children:[(0,r.jsxs)("div",{className:"section grid gap-8",children:[(0,r.jsx)("div",{className:"text-2xl",children:"Profile"}),(0,r.jsxs)("div",{className:"cards flex flex-wrap gap-16",children:[(0,r.jsxs)(y.Zb,{className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(E.Y,{className:"h-7 w-7 mr-2"}),"Name"]}),(0,r.jsxs)(y.aY,{className:"overflow-hidden",children:[(0,r.jsx)("p",{className:"pb-4 text-gray-400",children:"What should Khoj refer to you as?"}),(0,r.jsx)(_.I,{type:"text",onChange:e=>D(e.target.value),value:C,className:"w-full border border-gray-300 rounded-lg p-4 py-6"})]}),(0,r.jsx)(y.eW,{className:"flex flex-wrap gap-4",children:(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:eN,disabled:C===w.given_name,children:[(0,r.jsx)(P.B,{className:"h-5 w-5 inline mr-2"}),"Save"]})})]}),(0,r.jsxs)(y.Zb,{id:"subscription",className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(O.a,{className:"h-7 w-7 mr-2"}),"Subscription"]}),(0,r.jsxs)(y.aY,{className:"grid gap-2 overflow-hidden",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Current Plan"}),"trial"===w.subscription_state&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-xl text-primary/80",children:"Futurist (Trial)"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["You are on a 14 day trial of the Khoj Futurist plan. Check"," ",(0,r.jsx)("a",{href:"https://khoj.dev/pricing",target:"_blank",children:"pricing page"})," ","to compare plans."]})]})||"subscribed"===w.subscription_state&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-xl text-primary/80",children:"Futurist"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Subscription ",(0,r.jsx)("b",{children:"renews"})," on"," ",(0,r.jsx)("b",{children:w.subscription_renewal_date})]})]})||"unsubscribed"===w.subscription_state&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-xl",children:"Futurist"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Subscription ",(0,r.jsx)("b",{children:"ends"})," on"," ",(0,r.jsx)("b",{children:w.subscription_renewal_date})]})]})||"expired"===w.subscription_state&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-xl",children:"Free Plan"}),w.subscription_renewal_date&&(0,r.jsxs)("p",{className:"text-gray-400",children:["Subscription ",(0,r.jsx)("b",{children:"expired"})," on"," ",(0,r.jsx)("b",{children:w.subscription_renewal_date})]})||(0,r.jsxs)("p",{className:"text-gray-400",children:["Check"," ",(0,r.jsx)("a",{href:"https://khoj.dev/pricing",target:"_blank",children:"pricing page"})," ","to compare plans."]})]})]}),(0,r.jsx)(y.eW,{className:"flex flex-wrap gap-4",children:"subscribed"==w.subscription_state&&(0,r.jsxs)(u.z,{variant:"outline",className:"hover:text-red-400",onClick:()=>ew("cancel"),children:[(0,r.jsx)(A.b,{className:"h-5 w-5 mr-2"}),"Unsubscribe"]})||"unsubscribed"==w.subscription_state&&(0,r.jsxs)(u.z,{variant:"outline",className:"text-primary/80 hover:text-primary",onClick:()=>ew("resubscribe"),children:[(0,r.jsx)(I.e,{weight:"bold",className:"h-5 w-5 mr-2"}),"Resubscribe"]})||(0,r.jsxs)(u.z,{variant:"outline",className:"text-primary/80 hover:text-primary",onClick:()=>window.open("".concat(w.khoj_cloud_subscription_url,"?prefilled_email=").concat(w.username),"_blank","noopener,noreferrer"),children:[(0,r.jsx)(I.e,{weight:"bold",className:"h-5 w-5 mr-2"}),"Subscribe"]})})]})]})]}),ep&&(0,r.jsx)(ea,{onClose:()=>ef(!1)}),(0,r.jsxs)("div",{className:"section grid gap-8",children:[(0,r.jsx)("div",{className:"text-2xl",children:"Content"}),(0,r.jsxs)("div",{className:"cards flex flex-wrap gap-16",children:[(0,r.jsxs)(y.Zb,{id:"computer",className:eg,children:[(0,r.jsxs)(y.Ol,{className:"flex flex-row text-2xl",children:[(0,r.jsx)(z.I,{className:"h-8 w-8 mr-2"}),"Files",w.enabled_content_source.computer&&(0,r.jsx)(Y.f,{className:"h-6 w-6 ml-auto text-green-500",weight:"fill"})]}),(0,r.jsx)(y.aY,{className:"overflow-hidden pb-12 text-gray-400",children:"Manage your synced files"}),(0,r.jsxs)(y.eW,{className:"flex flex-wrap gap-4",children:[(0,r.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>ef(!0),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.h,{className:"h-5 w-5 inline mr-1"}),"Manage"]})}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",className:"".concat(w.enabled_content_source.computer||"hidden"),onClick:()=>eT("computer"),children:[(0,r.jsx)(K.u,{className:"h-5 w-5 inline mr-1"}),"Disable"]})]})]}),(0,r.jsxs)(y.Zb,{id:"github",className:"".concat(eg," hidden"),children:[(0,r.jsxs)(y.Ol,{className:"flex flex-row text-2xl",children:[(0,r.jsx)(R.b,{className:"h-8 w-8 mr-2"}),"Github"]}),(0,r.jsx)(y.aY,{className:"overflow-hidden pb-12 text-gray-400",children:"Set Github repositories to index"}),(0,r.jsxs)(y.eW,{className:"flex flex-wrap gap-4",children:[(0,r.jsx)(u.z,{variant:"outline",size:"sm",children:w.enabled_content_source.github&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.h,{className:"h-5 w-5 inline mr-1"}),"Manage"]})||(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.F,{className:"h-5 w-5 inline mr-1"}),"Connect"]})}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",className:"".concat(w.enabled_content_source.github||"hidden"),children:[(0,r.jsx)(K.u,{className:"h-5 w-5 inline mr-1"}),"Disable"]})]})]}),(0,r.jsxs)(y.Zb,{id:"notion",className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(L.F,{className:"h-7 w-7 mr-2"}),"Notion",w.enabled_content_source.notion&&(0,r.jsx)(Y.f,{className:"h-6 w-6 ml-auto text-green-500",weight:"fill"})]}),(0,r.jsxs)(y.aY,{className:"grid gap-4",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Sync your Notion workspace."}),!w.notion_oauth_url&&(0,r.jsx)(_.I,{onChange:e=>el(e.target.value),value:eo||"",placeholder:"Enter API Key of your Khoj integration on Notion",className:"w-full border border-gray-300 rounded-lg px-4 py-6"})]}),(0,r.jsxs)(y.eW,{className:"flex flex-wrap gap-4",children:[w.notion_oauth_url&&!w.enabled_content_source.notion?(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>{window.open(w.notion_oauth_url)},children:[(0,r.jsx)(W.F,{className:"h-5 w-5 inline mr-1"}),"Connect"]}):w.enabled_content_source.notion&&eo===w.notion_token?(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>eS("notion"),children:[(0,r.jsx)(M.t,{className:"h-5 w-5 inline mr-1"}),"Sync"]}):w.notion_oauth_url?(0,r.jsx)(r.Fragment,{}):(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:ek,disabled:eo===w.notion_token,children:[(0,r.jsx)(P.B,{className:"h-5 w-5 inline mr-1"}),w.enabled_content_source.notion&&"Update API Key"||"Set API Key"]}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",className:"".concat(w.notion_token||"hidden"),onClick:()=>eT("notion"),children:[(0,r.jsx)(K.u,{className:"h-5 w-5 inline mr-1"}),"Disconnect"]})]})]})]})]}),(0,r.jsxs)("div",{className:"section grid gap-8",children:[(0,r.jsx)("div",{className:"text-2xl",children:"Models"}),(0,r.jsxs)("div",{className:"cards flex flex-wrap gap-16",children:[w.chat_model_options.length>0&&(0,r.jsxs)(y.Zb,{className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(V.G,{className:"h-7 w-7 mr-2"}),"Chat"]}),(0,r.jsxs)(y.aY,{className:"overflow-hidden pb-12 grid gap-8",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Pick the chat model to generate text responses"}),(0,r.jsx)(er,{items:w.chat_model_options,selected:w.selected_chat_model_config,callbackFunc:ev("chat")})]}),(0,r.jsx)(y.eW,{className:"flex flex-wrap gap-4",children:!w.is_active&&(0,r.jsx)("p",{className:"text-gray-400",children:"Subscribe to switch model"})})]}),w.search_model_options.length>0&&(0,r.jsxs)(y.Zb,{className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(U.r,{className:"h-7 w-7 mr-2"}),"Search"]}),(0,r.jsxs)(y.aY,{className:"overflow-hidden pb-12 grid gap-8",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Pick the search model to find your documents"}),(0,r.jsx)(er,{items:w.search_model_options,selected:w.selected_search_model_config,callbackFunc:ev("search")})]}),(0,r.jsx)(y.eW,{className:"flex flex-wrap gap-4"})]}),w.paint_model_options.length>0&&(0,r.jsxs)(y.Zb,{className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(B.Y,{className:"h-7 w-7 mr-2"}),"Paint"]}),(0,r.jsxs)(y.aY,{className:"overflow-hidden pb-12 grid gap-8",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Pick the paint model to generate image responses"}),(0,r.jsx)(er,{items:w.paint_model_options,selected:w.selected_paint_model_config,callbackFunc:ev("paint")})]}),(0,r.jsx)(y.eW,{className:"flex flex-wrap gap-4",children:!w.is_active&&(0,r.jsx)("p",{className:"text-gray-400",children:"Subscribe to switch model"})})]}),w.voice_model_options.length>0&&(0,r.jsxs)(y.Zb,{className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(G.u,{className:"h-7 w-7 mr-2"}),"Voice"]}),(0,r.jsxs)(y.aY,{className:"overflow-hidden pb-12 grid gap-8",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Pick the voice model to generate speech responses"}),(0,r.jsx)(er,{items:w.voice_model_options,selected:w.selected_voice_model_config,callbackFunc:ev("voice")})]}),(0,r.jsx)(y.eW,{className:"flex flex-wrap gap-4",children:!w.is_active&&(0,r.jsx)("p",{className:"text-gray-400",children:"Subscribe to switch model"})})]})]})]}),(0,r.jsxs)("div",{className:"section grid gap-8",children:[(0,r.jsx)("div",{id:"clients",className:"text-2xl",children:"Clients"}),(0,r.jsxs)("div",{className:"cards flex flex-wrap gap-8",children:[!w.anonymous_mode&&(0,r.jsxs)(y.Zb,{className:"grid grid-flow-column border border-gray-300 shadow-md rounded-lg bg-gradient-to-b from-background to-gray-50 dark:to-gray-950",children:[(0,r.jsxs)(y.Ol,{className:"text-xl grid grid-flow-col grid-cols-[1fr_auto] pb-0",children:[(0,r.jsxs)("span",{className:"flex flex-wrap",children:[(0,r.jsx)(H.s,{className:"h-7 w-7 mr-2"}),"API Keys"]}),(0,r.jsxs)(u.z,{variant:"secondary",className:"!mt-0",onClick:i,children:[(0,r.jsx)(J.v,{weight:"bold",className:"h-5 w-5 mr-2"}),"Generate Key"]})]}),(0,r.jsxs)(y.aY,{className:"overflow-hidden grid gap-6",children:[(0,r.jsxs)("p",{className:"text-md text-gray-400",children:["Access Khoj from the"," ",(0,r.jsx)("a",{href:"https://docs.khoj.dev/clients/Desktop",target:"_blank",children:"Desktop"}),","," ",(0,r.jsx)("a",{href:"https://docs.khoj.dev/clients/Obsidian",children:"Obsidian"}),","," ",(0,r.jsx)("a",{href:"https://docs.khoj.dev/clients/Emacs",children:"Emacs"})," ","apps and more."]}),(0,r.jsx)(N,{children:(0,r.jsx)(v,{children:a.map(e=>(0,r.jsxs)(k,{children:[(0,r.jsx)(S,{className:"pl-0 py-3",children:e.name}),(0,r.jsxs)(S,{className:"grid grid-flow-col grid-cols-[1fr_auto] bg-secondary rounded-xl p-3 m-1",children:[(0,r.jsx)("span",{children:"".concat(e.token.slice(0,6),"...").concat(e.token.slice(-4))}),(0,r.jsxs)("div",{className:"grid grid-flow-col",children:[(0,r.jsx)(q.C,{weight:"bold",className:"h-4 w-4 mr-2 hover:bg-primary/40",onClick:()=>{ej({title:"\uD83D\uDD11 Copied API Key: ".concat(e.name),description:"Set this API key in the Khoj apps you want to connect to this Khoj account"}),x(e.token)}}),(0,r.jsx)(F.r,{weight:"bold",className:"h-4 w-4 mr-2 md:ml-4 text-red-400 hover:bg-primary/40",onClick:()=>{ej({title:"\uD83D\uDD11 Deleted API Key: ".concat(e.name),description:"Apps using this API key will no longer connect to this Khoj account"}),p(e.token)}})]})]})]},e.token))})})]}),(0,r.jsx)(y.eW,{className:"flex flex-wrap gap-4"})]}),(0,r.jsxs)(y.Zb,{className:eg,children:[(0,r.jsxs)(y.Ol,{className:"text-xl flex flex-row",children:[(0,r.jsx)(X.V,{className:"h-7 w-7 mr-2"}),"Chat on Whatsapp","verified"===eu&&(0,r.jsx)(Y.f,{weight:"bold",className:"h-4 w-4 ml-1 text-green-400"})||"setup"!==eu&&(0,r.jsx)($.C,{weight:"bold",className:"h-4 w-4 ml-1 text-yellow-400"})]}),(0,r.jsxs)(y.aY,{className:"grid gap-4",children:[(0,r.jsxs)("p",{className:"text-gray-400",children:["Connect your number to chat with Khoj on WhatsApp. Learn more about the integration"," ",(0,r.jsx)("a",{href:"https://docs.khoj.dev/clients/whatsapp",children:"here"}),"."]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(en.Z,{initialValue:ec||"",onChangeNumber:ed,disabled:"verify"===eu,initOptions:{separateDialCode:!0,initialCountry:"af",utilsScript:"https://assets.khoj.dev/intl-tel-input%4023.8.0_build_js_utils.js",containerClass:"".concat(o().phoneInput)}}),"verify"===eu&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Enter the OTP sent to your number: ".concat(ec)}),(0,r.jsx)(j,{autoFocus:!0,maxLength:6,value:eh||"",onChange:em,onComplete:()=>ex("verify"),children:(0,r.jsxs)(g,{children:[(0,r.jsx)(b,{index:0}),(0,r.jsx)(b,{index:1}),(0,r.jsx)(b,{index:2}),(0,r.jsx)(b,{index:3}),(0,r.jsx)(b,{index:4}),(0,r.jsx)(b,{index:5})]})})]})]})]}),(0,r.jsxs)(y.eW,{className:"flex flex-wrap gap-4",children:["verify"===eu&&(0,r.jsx)(u.z,{variant:"outline",onClick:e_,children:"Verify"})||(0,r.jsx)(u.z,{variant:"outline",disabled:!ec||ec===w.phone_number&&"verified"===eu||!(0,m.y)(ec),onClick:eb,children:w.phone_number?ec&&(ec!==w.phone_number||"verified"!==eu)&&(0,m.y)(ec)?(0,r.jsxs)(r.Fragment,{children:["Send OTP"," ",(0,r.jsx)(ee.o,{className:"inline ml-2",weight:"bold"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.F,{className:"inline mr-2 text-green-400"}),"Switch Number"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.F,{className:"inline mr-2"}),"Setup Whatsapp"]})}),"verified"===eu&&(0,r.jsxs)(u.z,{variant:"outline",onClick:()=>ey(),children:[(0,r.jsx)(K.u,{className:"h-5 w-5 mr-2"}),"Disconnect"]})]})]})]})]})]})})})})]}):(0,r.jsx)(es.Z,{})}(n=a||(a={})).Setup="setup",n.SendOTP="otp",n.VerifyOTP="verify",n.Verified="verified"},35657:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var n=s(2265);let a=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function h(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=n.useState(c);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},55268:function(e){e.exports={page:"settings_page__mP7qk",contentBody:"settings_contentBody__uZjue",phoneInput:"settings_phoneInput__j6xJN",sidePanel:"settings_sidePanel__osdez"}}},function(e){e.O(0,[4229,3630,9001,3062,2790,1603,2971,7023,1744],function(){return e(e.s=62960)}),_N_E=e.O()}]);