//>>built
require({cache:{"url:app/ui/managers/templates/LabelManager.html":'\x3cdiv\x3e\n  \x3cdiv class\x3d"row relation-row" style\x3d"margin-bottom: 5px;"\x3e\n    \x3cdiv class\x3d"large-offset-10 large-2 columns"\x3e\n      \x3ca style\x3d"float: right;" href\x3d"#" class\x3d"button tiny" data-dojo-attach-event\x3d"onClick: _addLabel" title\x3d"Add label"\x3eAdd Label\x26nbsp;\x26nbsp;\x3ci class\x3d"fa fa-plus"\x3e\x3c/i\x3e\x3c/a\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"row"\x3e\n    \x3cdiv class\x3d"large-12 columns" style\x3d"padding: 0;"\x3e\n      \x3cdiv data-dojo-attach-point\x3d"labelGridNode" style\x3d"max-height: 350px;"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e'}});
define("app/ui/managers/LabelManager","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-style dojo/json dojo/on dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LabelManager.html dstore/Memory dstore/Trackable dgrid/OnDemandGrid dgrid/extensions/DijitRegistry dgrid/extensions/ColumnResizer ../../utils/DomUtils ../dialogs/LabelsDialog".split(" "),function(f,g,b,k,y,z,A,m,B,q,r,t,n,p,u,v,w,C,x){return f([q,r],{templateString:t,baseClass:"label-manager",
languageController:null,listController:null,concept:null,languageList:null,_labelDialog:null,_labelStore:null,_labelGrid:null,_index:0,postCreate:function(){this.inherited(arguments);this.trackableMemory=f([n,p]);this._labelStore=new this.trackableMemory({data:[]});this.concept&&g.forEach(this.concept.labels,b.hitch(this,function(a){a.id=this._index++;this._labelStore.put(a)}));this._createGrid({collection:this._labelStore},this.labelGridNode);this._labelDialog=new x({parentNode:this,langList:this.languageList,
typeList:this.listController.getLabelTypes()});m(this._labelDialog,"add.label",b.hitch(this,function(a){this._doAddLabel(a)}));m(this._labelDialog,"edit.label",b.hitch(this,function(a){this._doEditLabel(a)}))},startup:function(){this.inherited(arguments);this._labelGrid.startup();this._labelGrid.resize()},reset:function(){this._labelDialog&&this._labelDialog.reset();this._labelStore=new (f([n,p]))({data:[]});this._labelGrid.set("collection",this._labelStore)},_createGrid:function(a,h){var l={label:{label:"Title",
field:"label"},language:{label:"Language",field:"language",formatter:b.hitch(this,function(c){var d=g.filter(this.languageList,function(e){return e.id===c})[0];return d?d.name:"-"})},type:{label:"Type",field:"type",formatter:b.hitch(this,function(c){return g.filter(this.listController.getLabelTypes(),function(d){return d.value===c})[0].label})},actions:{label:"",renderCell:b.hitch(this,function(c){if(void 0===c.id)return null;var d=k.create("div",{"class":"dGridHyperlink"});k.create("a",{href:"#",
title:"Edit label",className:"fa fa-pencil",innerHTML:"",style:"margin-right: 12px;",onclick:b.hitch(this,function(e){e.preventDefault();this._editLabel(c)})},d);k.create("a",{href:"#",title:"Remove label",className:"fa fa-trash",innerHTML:"",onclick:b.hitch(this,function(e){e.preventDefault();this._removeRow(c.id)})},d);return d})}};this._labelGrid=l=new (f([u,v,w]))({collection:a.collection,columns:l,showHeader:!1,noDataMessage:"No labels found",loadingMessage:"Fetching data.."},h);l.on("dgrid-error",
function(c){})},getData:function(){return{labels:this._labelStore.data}},setConcept:function(a){a&&(this.concept=a,this._labelStore=new this.trackableMemory({data:[]}),g.forEach(this.concept.labels,b.hitch(this,function(h){h.id=this._index++;this._labelStore.put(h)})),this._labelGrid.set("collection",this._labelStore))},updateLanguages:function(a){a&&(this.languageList=a,this._labelDialog.updateLanguages(a))},_addLabel:function(a){a?a.preventDefault():null;this._labelDialog.show()},_editLabel:function(a){this._labelDialog.show(a)},
_doAddLabel:function(a){this._labelStore.add({language:a.lang,type:a.labelType,label:a.label})},_doEditLabel:function(a){this._labelStore.put({language:a.lang,type:a.labelType,label:a.label,id:a.id})},_removeRow:function(a){this._labelStore.remove(a)}})});
//# sourceMappingURL=LabelManager.js.map