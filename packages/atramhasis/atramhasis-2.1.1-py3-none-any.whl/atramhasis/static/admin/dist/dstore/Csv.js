//>>built
define("dstore/Csv",["dojo/_base/lang","dojo/_base/declare"],function(r,t){var u=/^\s*"([\S\s]*)"\s*$/,v=/""/g,w=/"/g;return t(null,{fieldNames:null,delimiter:",",newline:"\r\n",trim:!1,parse:function(e){var l=[];e=e.split(this.newline);var n=this.fieldNames,a=0,f=[],g="",h="",c;var d=0;var b=e.length;a:for(;d<b;d++)if(r.trim(e[d])){var m=e[d].split(this.delimiter);var k=0;for(c=m.length;k<c;k++){var p=m[k];var q=-1;g+=h+p;for(h="";0<=(q=p.indexOf('"',q+1));)a++;if(0===a%2){if(0<a)if(a=u.exec(g))f.push(a[1].replace(v,
'"'));else{f=[];g="";a=0;continue a}else f.push(this.trim||!n?r.trim(g):g);g="";a=0}else h=this.delimiter}if(0===a){if(n){m=l;c=m.push;k=void 0;p=n;q={};var x=p.length;for(k=0;k<x;k++)q[p[k]]=f[k];c.call(m,q)}else n=this.fieldNames=f;f=[]}else h=this.newline}return l},toCsv:function(e){return this.stringify(this.data,e)},stringify:function(e,l){l=l||{};var n=l.alwaysQuote,a=this.fieldNames,f=this.delimiter,g=this.newline,h="",c,d;for(c=-1;c<e.length;c++)for(-1<c&&(h+=g),d=0;d<a.length;d++){var b=
0>c?a[d]:e[c][a[d]];if(null===b||void 0===b)b="";"string"!==typeof b&&(b=b.toString());var m=n||0<=b.indexOf('"')||0<=b.indexOf(f);h+=(0<d?f:"")+(m?'"'+b.replace(w,'""')+'"':b)}l.trailingNewline&&(h+=g);return h}})});
//# sourceMappingURL=Csv.js.map