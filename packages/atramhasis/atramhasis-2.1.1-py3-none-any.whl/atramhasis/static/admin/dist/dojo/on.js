//>>built
define("dojo/on",["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(z,A,h){function B(a,c,b,d,e){if(d=c.match(/(.*):(.*)/))return c=d[2],d=d[1],g.selector(d,c).call(e,a,b);h("touch")&&(C.test(c)&&(b=q(b)),h("event-orientationchange")||"orientationchange"!=c||(c="resize",a=window,b=q(b)));r&&(b=r(b));if(a.addEventListener){var f=c in t,k=f?t[c]:c;a.addEventListener(k,b,f);return{remove:function(){a.removeEventListener(k,b,f)}}}if(u&&a.attachEvent)return u(a,"on"+c,b);throw Error("Target must be an event emitter");
}function D(){this.cancelable=!1;this.defaultPrevented=!0}function E(){this.bubbles=!1}var v=window.ScriptEngineMajorVersion;h.add("jscript",v&&v()+ScriptEngineMinorVersion()/10);h.add("event-orientationchange",h("touch")&&!h("android"));h.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);h.add("event-focusin",function(a,c,b){return"onfocusin"in b});h("touch")&&h.add("touch-can-modify-event-delegate",function(){var a=function(){};
a.prototype=document.createEvent("MouseEvents");try{var c=new a;c.target=null;return null===c.target}catch(b){return!1}});var g=function(a,c,b,d){return"function"!=typeof a.on||"function"==typeof c||a.nodeType?g.parse(a,c,b,B,d,this):a.on(c,b)};g.pausable=function(a,c,b,d){var e;a=g(a,c,function(){if(!e)return b.apply(this,arguments)},d);a.pause=function(){e=!0};a.resume=function(){e=!1};return a};g.once=function(a,c,b,d){var e=g(a,c,function(){e.remove();return b.apply(this,arguments)});return e};
g.parse=function(a,c,b,d,e,f){var k;if(c.call)return c.call(f,a,b);c instanceof Array?k=c:-1<c.indexOf(",")&&(k=c.split(/\s*,\s*/));if(k){var l=[];c=0;for(var m;m=k[c++];)l.push(g.parse(a,m,b,d,e,f));l.remove=function(){for(var n=0;n<l.length;n++)l[n].remove()};return l}return d(a,c,b,e,f)};var C=/^touch/;g.matches=function(a,c,b,d,e){e=e&&"function"==typeof e.matches?e:A.query;d=!1!==d;1!=a.nodeType&&(a=a.parentNode);for(;!e.matches(a,c,b);)if(a==b||!1===d||!(a=a.parentNode)||1!=a.nodeType)return!1;
return a};g.selector=function(a,c,b){return function(d,e){function f(m){return g.matches(m,a,d,b,k)}var k="function"==typeof a?{matches:a}:this,l=c.bubble;return l?g(d,l(f),e):g(d,c,function(m){var n=f(m.target);if(n)return m.selectorTarget=n,e.call(n,m)})}};var F=[].slice,G=g.emit=function(a,c,b){var d=F.call(arguments,2),e="on"+c;if("parentNode"in a){var f=d[0]={},k;for(k in b)f[k]=b[k];f.preventDefault=D;f.stopPropagation=E;f.target=a;f.type=c;b=f}do a[e]&&a[e].apply(a,d);while(b&&b.bubbles&&(a=
a.parentNode));return b&&b.cancelable&&b},t=h("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!h("event-stopimmediatepropagation"))var H=function(){this.modified=this.immediatelyStopped=!0},r=function(a){return function(c){if(!c.immediatelyStopped)return c.stopImmediatePropagation=H,a.apply(this,arguments)}};if(h("dom-addeventlistener"))g.emit=function(a,c,b){if(a.dispatchEvent&&document.createEvent){var d=(a.ownerDocument||document).createEvent("HTMLEvents");d.initEvent(c,!!b.bubbles,!!b.cancelable);
for(var e in b)e in d||(d[e]=b[e]);return a.dispatchEvent(d)&&d}return G.apply(g,arguments)};else{g._fixEvent=function(a,c){a||(a=(c&&(c.ownerDocument||c.document||c).parentWindow||window).event);if(!a)return a;try{p&&a.type==p.type&&a.srcElement==p.target&&(a=p)}catch(d){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=c||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=I,a.preventDefault=
J),a.type){case "keypress":var b="charCode"in a?a.charCode:a.keyCode;10==b?(b=0,a.keyCode=13):13==b||27==b?b=0:3==b&&(b=99);a.charCode=b;b=a;b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}return a};var p,w=function(a){this.handle=a};w.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var K=function(a){return function(c){c=g._fixEvent(c,this);var b=a.call(this,c);c.modified&&(p||setTimeout(function(){p=null}),p=c);return b}},u=function(a,
c,b){b=K(b);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>h("jscript"))&&!h("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=a[c];if(!d||!d.listeners){var e=d;d=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");d.listeners=[];a[c]=d;d.global=this;e&&d.listeners.push(_dojoIEListeners_.push(e)-
1)}d.listeners.push(a=d.global._dojoIEListeners_.push(b)-1);return new w(a)}return z.after(a,c,b,!0)},I=function(){this.cancelBubble=!0},J=g._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(h("touch"))var x=function(){},y=window.orientation,q=function(a){return function(c){var b=c.corrected;if(!b){var d=c.type;try{delete c.type}catch(k){}if(c.type){if(h("touch-can-modify-event-delegate"))x.prototype=
c,b=new x;else{b={};for(var e in c)b[e]=c[e]}b.preventDefault=function(){c.preventDefault()};b.stopPropagation=function(){c.stopPropagation()}}else b=c,b.type=d;c.corrected=b;if("resize"==d){if(y==window.orientation)return null;y=window.orientation;b.type="orientationchange";return a.call(this,b)}"rotation"in b||(b.rotation=0,b.scale=1);if(window.TouchEvent&&c instanceof TouchEvent){d=b.changedTouches[0];for(var f in d)delete b[f],b[f]=d[f]}}return a.call(this,b)}};return g});
//# sourceMappingURL=on.js.map