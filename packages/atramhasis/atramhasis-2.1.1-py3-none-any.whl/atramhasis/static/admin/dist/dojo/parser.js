//>>built
define("dojo/parser","require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./json5 ./query ./on ./ready".split(" "),function(H,D,A,C,O,P,Q,R,M,S,T,I,F,E,N,U,V){function W(c){var a=c._nameCaseMap,e=c.prototype;if(!a||a._extendCnt<G){a=c._nameCaseMap={};for(var f in e)"_"!==f.charAt(0)&&(a[f.toLowerCase()]=f);a._extendCnt=G}return a}function J(c,a){a||(a=H);var e=a._dojoParserCtorMap||(a._dojoParserCtorMap=
{}),f=c.join();if(!e[f]){for(var g=[],b=0,r=c.length;b<r;b++){var m=c[b];g[g.length]=e[m]=e[m]||A.getObject(m)||~m.indexOf("/")&&a(m)}b=g.shift();e[f]=g.length?b.createSubclass?b.createSubclass(g):b.extend.apply(b,g):b}return e[f]}new Date("X");var K=F("csp-restrictions")?E.parse:function(c){return eval("("+c+")")};var G=0;M.after(A,"extend",function(){G++},!0);E={_clearCache:function(){G++;_ctorMap={}},_functionFromScript:function(c,a){var e="",f="",g=c.getAttribute(a+"args")||c.getAttribute("args"),
b=c.getAttribute("with");g=(g||"").split(/\s*,\s*/);b&&b.length&&C.forEach(b.split(/\s*,\s*/),function(r){e+="with("+r+"){";f+="}"});return new Function(g,e+c.innerHTML+f)},instantiate:function(c,a,e){a=a||{};e=e||{};var f=(e.scope||D._scopeName)+"Type",g="data-"+(e.scope||D._scopeName)+"-",b=g+"type",r=g+"mixins",m=[];C.forEach(c,function(n){var t=f in a?a[f]:n.getAttribute(b)||n.getAttribute(f);if(t){var h=n.getAttribute(r);t=h?[t].concat(h.split(/\s*,\s*/)):[t];m.push({node:n,types:t})}});return this._instantiate(m,
a,e)},_instantiate:function(c,a,e,f){function g(b){a._started||e.noStart||C.forEach(b,function(r){"function"!==typeof r.startup||r._started||r.startup()});return b}c=C.map(c,function(b){var r=b.ctor||J(b.types,e.contextRequire);if(!r)throw Error("Unable to resolve constructor for: '"+b.types.join()+"'");return this.construct(r,b.node,a,e,b.scripts,b.inherited)},this);return f?S(c).then(g):g(c)},construct:function(c,a,e,f,g,b){function r(v){w&&A.setObject(w,v);for(l=0;l<p.length;l++)M[p[l].advice||
"after"](v,p[l].method,A.hitch(v,p[l].func),!0);for(l=0;l<q.length;l++)q[l].call(v);for(l=0;l<y.length;l++)v.watch(y[l].prop,y[l].func);for(l=0;l<B.length;l++)U(v,B[l].event,B[l].func);return v}var m=c&&c.prototype;f=f||{};var n={};f.defaults&&A.mixin(n,f.defaults);b&&A.mixin(n,b);if(F("dom-attributes-explicit"))var t=a.attributes;else F("dom-attributes-specified-flag")?t=C.filter(a.attributes,function(v){return v.specified}):(b=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,
"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),t=C.map(b.split(/\s+/),function(v){var L=v.toLowerCase();return{name:v,value:"LI"==a.nodeName&&"value"==v||"enctype"==L?a.getAttribute(L):a.getAttributeNode(L).value}}));var h=f.scope||D._scopeName;b="data-"+h+"-";var d={};"dojo"!==h&&(d[b+"props"]="data-dojo-props",d[b+"type"]="data-dojo-type",d[b+"mixins"]="data-dojo-mixins",d[h+"type"]="dojotype",d[b+"id"]="data-dojo-id");var l=0,k;h=[];for(var w,x;k=t[l++];){var u=k.name,z=u.toLowerCase();
k=k.value;switch(d[z]||z){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":x=k;break;case "data-dojo-id":case "jsid":w=k;break;case "data-dojo-attach-point":case "dojoattachpoint":n.dojoAttachPoint=k;break;case "data-dojo-attach-event":case "dojoattachevent":n.dojoAttachEvent=k;break;case "class":n["class"]=a.className;break;case "style":n.style=a.style&&a.style.cssText;break;default:if(u in m||(u=W(c)[z]||u),u in m)switch(typeof m[u]){case "string":n[u]=
k;break;case "number":n[u]=k.length?Number(k):NaN;break;case "boolean":n[u]="false"!=k.toLowerCase();break;case "function":""===k||-1!=k.search(/[^\w\.]+/i)?n[u]=new Function(k):n[u]=A.getObject(k,!1)||new Function(k);h.push(u);break;default:z=m[u];try{n[u]=z&&"length"in z?k?k.split(/\s*,\s*/):[]:z instanceof Date?""==k?new Date(""):"now"==k?new Date:T.fromISOString(k):z instanceof R?D.baseUrl+k:K(k)}catch(v){}}else n[u]=k}}for(t=0;t<h.length;t++)d=h[t].toLowerCase(),a.removeAttribute(d),a[d]=null;
if(x)try{x=K.call(f.propsThis,"{"+x+"}"),A.mixin(n,x)}catch(v){throw Error(v.toString()+" in data-dojo-props\x3d'"+x+"'");}A.mixin(n,e);g||(g=c&&(c._noScript||m._noScript)?[]:N("\x3e script[type^\x3d'dojo/']",a));var p=[],q=[],y=[],B=[];if(g)for(l=0;l<g.length;l++)d=g[l],a.removeChild(d),e=d.getAttribute(b+"event")||d.getAttribute("event"),f=d.getAttribute(b+"prop"),x=d.getAttribute(b+"method"),h=d.getAttribute(b+"advice"),t=d.getAttribute("type"),d=this._functionFromScript(d,b),e?"dojo/connect"==
t?p.push({method:e,func:d}):"dojo/on"==t?B.push({event:e,func:d}):n[e]=d:"dojo/aspect"==t?p.push({method:x,advice:h,func:d}):"dojo/watch"==t?y.push({prop:f,func:d}):q.push(d);c=(g=c.markupFactory||m.markupFactory)?g(n,a,c):new c(n,a);return c.then?c.then(r):r(c)},scan:function(c,a){function e(p){if(!p.inherited){p.inherited={};var q=p.node,y=e(p.parent);q={dir:q.getAttribute("dir")||y.dir,lang:q.getAttribute("lang")||y.lang,textDir:q.getAttribute(t)||y.textDir};for(var B in q)q[B]&&(p.inherited[B]=
q[B])}return p.inherited}var f=[],g=[],b={},r=(a.scope||D._scopeName)+"Type",m="data-"+(a.scope||D._scopeName)+"-",n=m+"type",t=m+"textdir";m+="mixins";var h=c.firstChild,d=a.inherited;if(!d){d=function B(q,y){return q.getAttribute&&q.getAttribute(y)||q.parentNode&&B(q.parentNode,y)};d={dir:d(c,"dir"),lang:d(c,"lang"),textDir:d(c,t)};for(var l in d)d[l]||delete d[l]}d={inherited:d};for(var k,w;;)if(h)if(1!=h.nodeType)h=h.nextSibling;else if(k&&"script"==h.nodeName.toLowerCase())(x=h.getAttribute("type"))&&
/^dojo\/\w/i.test(x)&&k.push(h),h=h.nextSibling;else if(w)h=h.nextSibling;else{var x=h.getAttribute(n)||h.getAttribute(r);l=h.firstChild;if(x||l&&(3!=l.nodeType||l.nextSibling)){w=null;if(x){var u=h.getAttribute(m);k=u?[x].concat(u.split(/\s*,\s*/)):[x];try{w=J(k,a.contextRequire)}catch(p){}w||C.forEach(k,function(p){~p.indexOf("/")&&!b[p]&&(b[p]=!0,g[g.length]=p)});u=w&&!w.prototype._noScript?[]:null;d={types:k,ctor:w,parent:d,node:h,scripts:u};d.inherited=e(d);f.push(d)}else d={node:h,scripts:k,
parent:d};k=u;w=h.stopParser||w&&w.prototype.stopParser&&!a.template;h=l}else h=h.nextSibling}else{if(!d||!d.node)break;h=d.node.nextSibling;w=!1;d=d.parent;k=d.scripts}var z=new I;g.length?(F("dojo-debug-messages"),(a.contextRequire||H)(g,function(){z.resolve(C.filter(f,function(p){if(!p.ctor)try{p.ctor=J(p.types,a.contextRequire)}catch(B){}for(var q=p.parent;q&&!q.types;)q=q.parent;var y=p.ctor&&p.ctor.prototype;p.instantiateChildren=!(y&&y.stopParser&&!a.template);p.instantiate=!q||q.instantiate&&
q.instantiateChildren;return p.instantiate}))})):z.resolve(f);return z.promise},_require:function(c,a){var e=K("{"+c.innerHTML+"}"),f=[],g=[],b=new I,r=a&&a.contextRequire||H,m;for(m in e)f.push(m),g.push(e[m]);r(g,function(){for(var n=0;n<f.length;n++)A.setObject(f[n],arguments[n]);b.resolve(arguments)});return b.promise},_scanAmd:function(c,a){var e=new I,f=e.promise;e.resolve(!0);var g=this;N("script[type\x3d'dojo/require']",c).forEach(function(b){f=f.then(function(){return g._require(b,a)});b.parentNode.removeChild(b)});
return f},parse:function(c,a){!c||"string"==typeof c||"nodeType"in c||(a=c,c=a.rootNode);var e=c?P.byId(c):Q.body();a=a||{};var f=a.template?{template:!0}:{},g=[],b=this,r=this._scanAmd(e,a).then(function(){return b.scan(e,a)}).then(function(m){return b._instantiate(m,f,a,!0)}).then(function(m){return g=g.concat(m)}).otherwise(function(m){throw m;});A.mixin(g,r);return g}};D.parser=E;O.parseOnLoad&&V(100,E,"parse");return E});
//# sourceMappingURL=parser.js.map