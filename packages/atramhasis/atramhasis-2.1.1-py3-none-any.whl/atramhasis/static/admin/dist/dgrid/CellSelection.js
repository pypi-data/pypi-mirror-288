//>>built
define("dgrid/CellSelection","dojo/_base/declare dojo/aspect dojo/dom-class dojo/on dojo/has ./Selection".split(" "),function(p,r,l,t,u,q){return p(q,{selectionDelegate:".dgrid-cell",_selectionTargetType:"cells",_select:function(a,d,b){"undefined"===typeof b&&(b=!0);if("object"!==typeof a||!("element"in a))a=this.cell(a);else if(!a.row){if(b&&"object"===typeof b)for(e in b)this._select(this.cell(a.id,e),null,b[e]);else for(e in this.columns)this._select(this.cell(a.id,e),null,b);return}if(this.allowSelect(a)){var h=
a.row.id,c=this.selection[h];if(a.column){var g=c&&c[a.column.id];null===b&&(b=!g);var k=a.element;c=c||{};c[a.column.id]=b;this.selection[h]=c;var m=!1;for(f in c)if(!0===c[f]){m=!0;break}m||delete this.selection[h];k&&(b?l.add(k,"dgrid-selected"+(this.addUiClasses?" ui-state-active":"")):l.remove(k,"dgrid-selected ui-state-active"));b!=g&&k&&this._selectionEventQueues[(b?"":"de")+"select"].push(a);if(d)if(d.element||(d=this.cell(d)),d&&d.row){g=d.element;var f=a.element;h=this._determineSelectionDirection(f,
g);h||(g=(d=this.cell(document.getElementById(d.row.element.id),g.columnId))&&d.element,h=this._determineSelectionDirection(f,g));f=a.column.id;g=d.column.id;c=[];for(e in this.columns)if(n&&c.push(e),e===f&&(f=c)||e===g&&(g=c)){c.push(e);if(n||f==c&&e==g)break;var n=!0}var e=a.row.element;g=d.row.element;do{for(f=0;f<c.length;f++)a=this.cell(e,c[f]),this._select(a,null,b);if(e==g)break}while(e=a.row.element[h])}else this._lastSelected=k}else for(f in this.columns)this._select(this.cell(h,f),null,
b)}},_determineSelectionDirection:function(){var a=this.inherited(arguments);return"down"===a?"nextSibling":"up"===a?"previousSibling":a},isSelected:function(a,d){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.cell(a,d));var b=a.row.id;return b in this.selection?!!this.selection[b][a.column.id]:this.allSelected&&(!a.row.data||this.allowSelect(a))},clearSelection:function(a){a=!1;this.inherited(arguments)}})});
//# sourceMappingURL=CellSelection.js.map