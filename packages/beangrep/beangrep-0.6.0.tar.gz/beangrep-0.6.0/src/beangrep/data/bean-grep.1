.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.49.3.
.TH BEAN-GREP, "1" "August 2024" "bean-grep, version 0.5.1.dev7+g1b114b0" "User Commands"
.SH NAME
bean-grep, \- grep-like filter for Beancount
.SH SYNOPSIS
.B bean-grep
[\fI\,OPTIONS\/\fR] [\fI\,PATTERN\/\fR] \fI\,FILENAME\/\fR...
.SH DESCRIPTION
.IP
Search for entries matching given criteria in Beancount journals. Pretty
print matching entries to standard output.
.IP
Search criteria can be specified with the options below and/or providing an
explicit "smart" PATTERN. If given, PATTERN is interpreted as described
below under "Patterns". If not given, search criteria are defined by
explicit options.
.IP
Multiple options, options given mutiple times, and PATTERN(s) are logically
joined (AND\-ed) together.
.IP
The granularity of matching (and results) is that of individual entries,
e.g., full transactions, balances, notes, etc. By default only transactions
are returned; use the \fB\-\-type\fR/\-T option to override.
.IP
To read from standard input, pass "\-" as FILENAME, but beware that it
implies on\-disk buffering of stdin.
.SH OPTIONS
.TP
\fB\-a\fR, \fB\-\-account\fR REGEX
Only return entries referencing accounts
with names matching given regex.
.TP
\fB\-A\fR, \fB\-\-amount\fR "[OP]AMOUNT [REGEX]"
Only return entries with amounts matching
the given amount predicate. An amount
predicate start with an optional comparison
operator (one of "<", "<=", "=", ">=", ">",
with "=" being the default), followed by a
decimal number (using "." as decimal
separator), followed by an optional currency
regex. Multiple amount predicates can be
given to express complex amount ranges.
.TP
\fB\-d\fR, \fB\-\-date\fR [OP]DATE
Only return entries with dates matching the
given date predicate. A date predicate start
with an optional comparison operator (one of
"<", "<=", "=", ">=", ">", with "=" being
the default), and is followed by a date in
the form YYYY\-[MM[\-DD]]. Multiple date
predicates can be given to express complex
date ranges.
.TP
\fB\-f\fR, \fB\-\-flag\fR REGEX
Only return transactions with at least one
flag matching the given regex (usually a
single character, properly escaped).  Both
transaction and posting flags are used for
matching.
.TP
\fB\-l\fR, \fB\-\-link\fR REGEX
Only return entries with at least one link
matching given regex.
.TP
\fB\-m\fR, \fB\-\-meta\fR, \fB\-\-metadata\fR REGEX[:REGEX]
Only return entries with at least one
metadata key/value pair matching given
pattern. A pattern is a pair of regexs
separated by ":", the former matching on
metadata key, the latter on metadata value.
The second regex is optional and defaults to
".*".
.TP
\fB\-n\fR, \fB\-\-narration\fR REGEX
Only return entries whose narrations match
given regex.
.TP
\fB\-p\fR, \fB\-\-payee\fR REGEX
Only return entries whose payees match given
regex.
.TP
\fB\-s\fR, \fB\-\-somewhere\fR, \fB\-\-anywhere\fR REGEX
Only return entries with a value in them,
anywhere, matching given regex.
.TP
\fB\-t\fR, \fB\-\-tag\fR REGEX
Only return entries with at least one tag
matching given regex. The tag can be located
anywhere.
.TP
\fB\-T\fR, \fB\-\-type\fR TYPE(S)
Only return entries of certain types.  Types
are specified as a ","\-separated list of
type names; type names are: open, close,
commodity, pad, balance, transaction, note,
event, query, price, document, custom. The
special value "all" means: all directive
types. [default: transaction]
.TP
\fB\-\-case\-sensitive\fR
Search case sensitively. Overrides:
\fB\-i\fR/\-\-ignore\-case and \fB\-S\fR/\-\-smart\-case.
.TP
\fB\-i\fR, \fB\-\-ignore\-case\fR
Search case insensitively. Overrides
\fB\-S\fR/\-\-smart\-case; overridden by \fB\-\-casesensitive\fR.
.TP
\fB\-S\fR, \fB\-\-smart\-case\fR
Search case insensitively if all criteria
are lowercase, sensitively otherwise.
Overridden by: \fB\-\-case\-sensitive\fR and
\fB\-i\fR/\-\-ignore\-case.  [default: True]
.TP
\fB\-\-posting\-tags\-meta\fR TEXT
Metadata key used to attach tags to
transaction postings.  [default: tags]
.TP
\fB\-q\fR, \fB\-\-quiet\fR / \fB\-\-no\-quiet\fR
Quiet, do not write anything to standard
output. Exit successfully immediately if any
match is found.  [default: no\-quiet]
.TP
\fB\-\-skip\-internals\fR / \fB\-\-no\-skip\-internals\fR
When matching, ignore internal information
not visible in the ledger. This includes the
automatic metadata: filename, lineno.
[default: skip\-internals]
.TP
\fB\-v\fR, \fB\-\-invert\-match\fR
Invert the sense of matching: return entries
that do *not* match given criteria. This
clears the default "\-\-type transaction"
criteria, to avoid only returning nontransaction entries by default.
.TP
\fB\-\-verbose\fR
Increase logging verbosity. Default
verbosity is at WARNING level; passing this
option once will increase it to INFO, twice
or more to DEBUG.
.TP
\fB\-V\fR, \fB\-\-version\fR
Show the version and exit.
.TP
\fB\-\-help\fR
Show this message and exit.
.IP
Patterns:
.IP
When given the "smart" PATTERN is interpreted according to the following
heuristics, tried in order, first match wins:
.IP
\- if it is in the form "YYYY\-MM\-DD" \-> then it is interpreted as \fB\-\-date\fR
.IP
\- "#tag" \-> \fB\-\-tag\fR
.IP
\- "^link" \-> \fB\-\-link\fR
.IP
\- "@payee" \-> \fB\-\-payee\fR
.IP
\- if it starts with one of the five account types ("Assets", "Equity",
"Expenses",   "Income", "Liabilities") \-> \fB\-\-account\fR
.IP
\- "key:value" \-> \fB\-\-metadata\fR
.IP
\- otherwise \-> \fB\-\-somewhere\fR
.IP
Exit status:
.IP
Exit status is 0 (success) if a match is found, 1 if no match is found, 2 if
an error occurred.
.SH AUTHOR
Stefano Zacchiroli <zack@upsilon.cc>
.SH "REPORTING BUGS"
https://github.com/zacchiro/beangrep/issues
.SH COPYRIGHT
Beangrep is free software; you can redistribute it and/or modify it under the
terms of the GNU General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your option) any later
version.
.SH "SEE ALSO"
https://beancount.github.io
