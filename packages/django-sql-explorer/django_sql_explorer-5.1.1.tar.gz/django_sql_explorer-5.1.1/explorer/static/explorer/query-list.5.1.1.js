import{L as m}from"./index.5.1.1.js";import{g as d}from"./csrf.5.1.1.js";import{t as u}from"./favorites.5.1.1.js";import{M as y}from"./main.5.1.1.js";function E(){const s=document.querySelector(".search");s&&s.focus()}function k(){document.querySelectorAll(".query_favorite_toggle").forEach(function(o){o.addEventListener("click",u)});let s={valueNames:["sort-name","sort-created","sort-created","sort-last-run","sort-run-count","sort-connection"],handlers:{updated:[E]}};new m("queries",s),g()}function g(){let s=new y("#emailCsvModal",{}),o=null,r=function(e){return/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(e)},a=()=>{const e=document.getElementById("email-success-msg"),t=document.getElementById("email-error-msg");e.style.display="block",t.style.display="none",setTimeout(()=>s.hide(),2e3)},i=e=>{const t=document.getElementById("email-success-msg"),n=document.getElementById("email-error-msg");n.innerHTML=e,t.style.display="none",n.style.display="block"},c=function(e){let t=document.querySelector("#emailCsvInput").value,n="/"+o+"/email_csv?email="+t;r(t)?fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":d()},body:JSON.stringify({email:t})}).then(l=>{if(!l.ok)throw new Error("Network response was not ok");return l.json()}).then(l=>{a()}).catch(l=>{i(l.message)}):i("Email is invalid")};document.querySelectorAll("#btnSubmitCsvEmail").forEach(function(e){e.addEventListener("click",c)}),document.querySelectorAll(".email-csv").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),o=this.getAttribute("data-query-id"),s.show()})}),document.getElementById("emailCsvModal").addEventListener("hidden.bs.modal",e=>{document.getElementById("email-success-msg").style.display="none",document.getElementById("email-error-msg").style.display="none"})}export{k as setupQueryList};
