"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[323],{37323:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ne});var a=n(20641),r=n(90033),l=n(36554);function i(e,t,n,i,o,u){var s=(0,a.g2)("jobs-table");return(0,a.uX)(),(0,a.CE)("section",null,[(0,a.bF)(s,{"get-jobs":u.getJobs,onAffiliate:u.affiliate,onGenderize:u.genderize,onUnify:u.unify,onRecommendMatches:u.recommendMatches,ref:"table"},null,8,["get-jobs","onAffiliate","onGenderize","onUnify","onRecommendMatches"]),(0,a.bF)(l.K,{modelValue:o.snackbar.isOpen,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.snackbar.isOpen=e}),color:"error",text:""},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(o.snackbar.text),1)]})),_:1},8,["modelValue"])])}var o=n(14048),u=n(30388),s=n(58663),c=n(20595),d=(n(27495),n(25440),n(53751)),m=n(13892),f=n(87524),b=n(43813),p=n(79669),h=n(20236),k=n(83260),v=n(51161),g=function(e){return(0,a.Qi)("data-v-74044329"),e=e(),(0,a.jt)(),e},y={class:"header"},x={class:"title"},V=g((function(){return(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"text-left"},"Job ID"),(0,a.Lk)("th",{class:"text-left"},"Type"),(0,a.Lk)("th",{class:"text-left"},"Date"),(0,a.Lk)("th",{class:"text-center"},"Status")])],-1)})),_={class:"capitalize"},F={class:"text-center"},M={key:1,class:"text-center pa-4"},A={key:2,class:"text-subtitle-1 pa-7"};function w(e,t,n,l,i,o){var u=(0,a.g2)("job-modal");return(0,a.uX)(),(0,a.Wv)(b.I,{class:"jobs section mb-5 pa-0"},{default:(0,a.k6)((function(){return[(0,a.Lk)("header",y,[(0,a.Lk)("h4",x,[(0,a.bF)(p.w,{color:"black",size:"small",start:""},{default:(0,a.k6)((function(){return[(0,a.eW)(" mdi-tray-full ")]})),_:1}),(0,a.eW)(" Jobs ")]),(0,a.bF)(m.D,{color:"secondary",class:"black--text",size:"small",variant:"flat",onClick:t[0]||(t[0]=(0,d.D$)((function(e){return i.openModal=!0}),["stop"]))},{default:(0,a.k6)((function(){return[(0,a.eW)(" Add ")]})),_:1})]),i.jobs.length>0?((0,a.uX)(),(0,a.Wv)(k.Z,{key:0},{default:(0,a.k6)((function(){return[V,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.jobs,(function(t){return(0,a.uX)(),(0,a.CE)("tr",{key:t.jobId},[(0,a.Lk)("td",null,[(0,a.bF)(v.y,{location:"bottom"},{activator:(0,a.k6)((function(e){var n=e.props;return[(0,a.bF)(f.x,(0,a.v6)({class:"text-center clip"},n,{variant:"outlined",tile:""}),{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(t.jobId),1)]})),_:2},1040)]})),default:(0,a.k6)((function(){return[(0,a.Lk)("span",null,(0,r.v_)(t.jobId),1)]})),_:2},1024)]),(0,a.Lk)("td",_,(0,r.v_)(t.jobType.replace("_"," ")),1),(0,a.Lk)("td",null,(0,r.v_)(e.$formatDate(t.enqueuedAt)),1),(0,a.Lk)("td",F,[(0,a.bF)(f.x,{class:"ma-2",color:o.getColor(t.status),"text-color":"white"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(t.status),1)]})),_:2},1032,["color"])])])})),128))])]})),_:1})):(0,a.Q3)("",!0),i.jobs.length>0?((0,a.uX)(),(0,a.CE)("div",M,[(0,a.bF)(h.l,{modelValue:i.page,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return i.page=e}),t[2]||(t[2]=function(e){return o.getPaginatedJobs(e)})],length:i.pageCount,"total-visible":5},null,8,["modelValue","length"])])):((0,a.uX)(),(0,a.CE)("p",A,"There are no jobs in the queue.")),(0,a.bF)(u,(0,a.v6)({"is-open":i.openModal,"onUpdate:isOpen":t[3]||(t[3]=function(e){return i.openModal=e})},e.$attrs),null,16,["is-open"])]})),_:1})}n(52675),n(89463);var j=n(4189),C=n(91606),L=n(30697),U=n(93745),z=n(40276),O=n(91772),J=n(1560),S=n(56756),W=n(35526),E=n(41720),$=n(57254),X=n(97505),I=n(20105),T=function(e){return(0,a.Qi)("data-v-ad550e54"),e=e(),(0,a.jt)(),e},B=T((function(){return(0,a.Lk)("legend",{class:"subheader text--secondary"}," Unify profiles based on their: ",-1)})),D=T((function(){return(0,a.Lk)("legend",{class:"subheader text--secondary"}," Recommend matches based on: ",-1)}));function P(e,t,n,l,i,o){return(0,a.uX)(),(0,a.Wv)(O.p,{"model-value":n.isOpen,"max-width":"550px","onClick:outside":o.onClose},{default:(0,a.k6)((function(){return[(0,a.bF)(j.J,{class:"section"},{default:(0,a.k6)((function(){return[(0,a.bF)(C.r,{class:"header title"},{default:(0,a.k6)((function(){return[(0,a.eW)("New job")]})),_:1}),(0,a.bF)(L.O,{class:"mt-3"},{default:(0,a.k6)((function(){return[(0,a.bF)(S.L,null,{default:(0,a.k6)((function(){return[(0,a.bF)(W.B,null,{default:(0,a.k6)((function(){return[(0,a.bF)(I.d4,{modelValue:i.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.selected=e}),items:n.types,"menu-props":{offsetY:!0,maxWidth:500},label:"Type","item-title":"title",id:"type",density:"comfortable","hide-details":""},{item:(0,a.k6)((function(e){var t=e.item,n=e.props;return[(0,a.bF)($.g,(0,r._B)((0,a.Ng)(n)),{default:(0,a.k6)((function(){return[(0,a.bF)(X.w,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(t.raw.description),1)]})),_:2},1024)]})),_:2},1040)]})),_:1},8,["modelValue","items"])]})),_:1})]})),_:1}),"genderize"===i.selected?((0,a.uX)(),(0,a.Wv)(S.L,{key:0},{default:(0,a.k6)((function(){return[(0,a.bF)(W.B,null,{default:(0,a.k6)((function(){return[(0,a.bF)(z.a,{modelValue:i.forms.genderize.exclude,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.forms.genderize.exclude=e}),label:"Exclude individuals in RecommenderExclusionTerm list",id:"genderize_exclude"},null,8,["modelValue"]),(0,a.bF)(z.a,{modelValue:i.forms.genderize.noStrictMatching,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.forms.genderize.noStrictMatching=e}),label:"Disable strict name validation",id:"genderize_noStrictMatching"},null,8,["modelValue"])]})),_:1})]})),_:1})):(0,a.Q3)("",!0),"unify"===i.selected?((0,a.uX)(),(0,a.Wv)(J.n,{key:1},{default:(0,a.k6)((function(){return[(0,a.bF)(S.L,{class:"ma-0 mt-2"},{default:(0,a.k6)((function(){return[(0,a.bF)(W.B,{class:"pa-0 mb-3"},{default:(0,a.k6)((function(){return[(0,a.bF)(z.a,{modelValue:i.forms.unify.exclude,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.forms.unify.exclude=e}),label:"Exclude individuals in RecommenderExclusionTerm list",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{modelValue:i.forms.unify.strict,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.forms.unify.strict=e}),label:"Exclude individuals with invalid email addresses and names",density:"comfortable","hide-details":""},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,a.bF)(S.L,{class:"ma-0"},{default:(0,a.k6)((function(){return[(0,a.bF)(W.B,{class:"pa-0"},{default:(0,a.k6)((function(){return[(0,a.Lk)("fieldset",null,[B,(0,a.bF)(z.a,{modelValue:i.forms.unify.criteria,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.forms.unify.criteria=e}),label:"Name",value:"name",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{modelValue:i.forms.unify.criteria,"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.forms.unify.criteria=e}),label:"Email",value:"email",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{modelValue:i.forms.unify.criteria,"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.forms.unify.criteria=e}),label:"Username",value:"username",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{class:"ml-4",modelValue:i.forms.unify.matchSource,"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.forms.unify.matchSource=e}),label:"Only unify identities that share the same source",density:"comfortable","hide-details":""},null,8,["modelValue"])])]})),_:1})]})),_:1})]})),_:1})):(0,a.Q3)("",!0),"recommendMatches"===i.selected?((0,a.uX)(),(0,a.Wv)(J.n,{key:2},{default:(0,a.k6)((function(){return[(0,a.bF)(S.L,{class:"ma-0 mt-2"},{default:(0,a.k6)((function(){return[(0,a.bF)(W.B,{class:"pa-0 mb-3"},{default:(0,a.k6)((function(){return[(0,a.bF)(z.a,{modelValue:i.forms.recommendMatches.exclude,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.forms.recommendMatches.exclude=e}),label:"Exclude individuals in RecommenderExclusionTerm list",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{modelValue:i.forms.recommendMatches.strict,"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.forms.recommendMatches.strict=e}),label:"Exclude individuals with invalid email adresses and names",density:"comfortable","hide-details":""},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,a.bF)(S.L,{class:"ma-0"},{default:(0,a.k6)((function(){return[(0,a.bF)(W.B,{class:"pa-0"},{default:(0,a.k6)((function(){return[(0,a.Lk)("fieldset",null,[D,(0,a.bF)(z.a,{modelValue:i.forms.recommendMatches.criteria,"onUpdate:modelValue":t[11]||(t[11]=function(e){return i.forms.recommendMatches.criteria=e}),label:"Name",value:"name",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{modelValue:i.forms.recommendMatches.criteria,"onUpdate:modelValue":t[12]||(t[12]=function(e){return i.forms.recommendMatches.criteria=e}),label:"Email",value:"email",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{modelValue:i.forms.recommendMatches.criteria,"onUpdate:modelValue":t[13]||(t[13]=function(e){return i.forms.recommendMatches.criteria=e}),label:"Username",value:"username",density:"comfortable","hide-details":""},null,8,["modelValue"]),(0,a.bF)(z.a,{class:"ml-4",modelValue:i.forms.recommendMatches.matchSource,"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.forms.recommendMatches.matchSource=e}),label:"Only recommend identities that share the same source",density:"comfortable","hide-details":""},null,8,["modelValue"])])]})),_:1})]})),_:1})]})),_:1})):(0,a.Q3)("",!0)]})),_:1}),(0,a.bF)(U.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(E.h),(0,a.bF)(m.D,{color:"primary darken-1",variant:"text",onClick:o.onClose},{default:(0,a.k6)((function(){return[(0,a.eW)(" Cancel ")]})),_:1},8,["onClick"]),(0,a.bF)(m.D,{disabled:!i.selected,color:"primary",id:"confirm",variant:"flat",onClick:o.onSave},{default:(0,a.k6)((function(){return[(0,a.eW)(" Confirm ")]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1},8,["model-value","onClick:outside"])}var R=[{title:"Affiliate",value:"affiliate",description:"Affiliate individuals to organizations using recommendations."},{title:"Genderize",value:"genderize",description:"Autocomplete the gender information of individuals using genderize.io recommendations. "},{title:"Unify",value:"unify",description:"Merge individuals by using matching recommendations."},{title:"Recommend matches",value:"recommendMatches",description:"Recommend identity matches for individuals."}],Q={genderize:{exclude:!0,noStrictMatching:!1},unify:{criteria:["name","email","username"],exclude:!0,strict:!0,matchSource:!1},recommendMatches:{criteria:["name","email","username"],exclude:!0,strict:!0,matchSource:!1}};const q={name:"JobModal",props:{isOpen:{type:Boolean,required:!0},types:{type:Array,required:!1,default:function(){return R}}},data:function(){return{selected:null,forms:Q}},methods:{onClose:function(){this.$emit("update:isOpen",!1),this.selected=null,this.forms=Object.assign({},this.forms,Q)},onSave:function(){this.$emit(this.selected,this.forms[this.selected]),this.onClose()}}};var N=n(64621);const G=(0,N.A)(q,[["render",P],["__scopeId","data-v-ad550e54"]]),K=G,Y={name:"JobsTable",components:{JobModal:K},props:{getJobs:{type:Function,required:!0}},data:function(){return{jobs:[],page:1,pageSize:10,pageCount:1,openModal:!1}},created:function(){this.getPaginatedJobs(1)},methods:{getPaginatedJobs:function(){var e=arguments,t=this;return(0,u.A)((0,o.A)().mark((function n(){var a,r,l;return(0,o.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:t.page,r=e.length>1&&void 0!==e[1]?e[1]:t.pageSize,n.next=4,t.getJobs(a,r);case 4:l=n.sent,l&&(t.jobs=l.data.jobs.entities,t.pageCount=l.data.jobs.pageInfo.numPages,t.page=l.data.jobs.pageInfo.page);case 6:case"end":return n.stop()}}),n)})))()},getColor:function(e){return"finished"===e?"#3fa500":"failed"===e?"#f41900":"started"===e?"primary":"rgba(0, 0, 0, 0.42)"}}},Z=(0,N.A)(Y,[["render",w],["__scopeId","data-v-74044329"]]),H=Z,ee={name:"Jobs",components:{JobsTable:H},data:function(){return{snackbar:{isOpen:!1,text:null}}},methods:{getJobs:function(e,t){var n=this;return(0,u.A)((0,o.A)().mark((function a(){var r;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,s.zA)(n.$apollo,e,t);case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}}),a)})))()},affiliate:function(){var e=this;return(0,u.A)((0,o.A)().mark((function t(){return(0,o.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.OM)(e.$apollo);case 3:e.$refs.table.getPaginatedJobs(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.snackbar=Object.assign(e.snackbar,{isOpen:!0,text:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},genderize:function(e){var t=this;return(0,u.A)((0,o.A)().mark((function n(){var a,r;return(0,o.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.exclude,r=e.noStrictMatching,n.prev=1,n.next=4,(0,c.gW)(t.$apollo,a,r);case 4:t.$refs.table.getPaginatedJobs(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.snackbar=Object.assign(t.snackbar,{isOpen:!0,text:n.t0});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},unify:function(e){var t=this;return(0,u.A)((0,o.A)().mark((function n(){var a,r,l,i;return(0,o.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.criteria,r=e.exclude,l=e.strict,i=e.matchSource,n.prev=1,n.next=4,(0,c.QF)(t.$apollo,a,r,l,i);case 4:t.$refs.table.getPaginatedJobs(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.snackbar=Object.assign(t.snackbar,{isOpen:!0,text:n.t0});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},recommendMatches:function(e){var t=this;return(0,u.A)((0,o.A)().mark((function n(){var a,r,l,i;return(0,o.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.criteria,r=e.exclude,l=e.strict,i=e.matchSource,n.prev=1,n.next=4,(0,c.wg)(t.$apollo,a,r,l,[],i);case 4:t.$refs.table.getPaginatedJobs(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.snackbar=Object.assign(t.snackbar,{isOpen:!0,text:n.t0});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}},te=(0,N.A)(ee,[["render",i]]),ne=te}}]);
//# sourceMappingURL=323.89ed85e9.js.map