"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[488],{52790:(e,n,t)=>{t.d(n,{A:()=>g});var a=t(20641),r=t(90033),i=t(13892),l=t(4189),u=t(30697),o=t(93745),c=t(41720),s=t(79669),d=t(88249),f=t(43948),m={key:0},p={key:1,class:"font-italic"};function v(e,n,t,v,k,b){var h=(0,a.g2)("v-confirm-edit");return(0,a.uX)(),(0,a.Wv)(d.q,{modelValue:e.menu,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.menu=n}),"close-on-content-click":!1},{activator:(0,a.k6)((function(n){var l=n.props;return["text"===t.activator?((0,a.uX)(),(0,a.CE)("button",(0,a.v6)({key:0,class:"hide-icon"},l),[t.modelValue?((0,a.uX)(),(0,a.CE)("span",m,[(0,a.RG)(e.$slots,"value",(0,r._B)((0,a.Ng)(l)),(function(){return[(0,a.eW)((0,r.v_)(t.modelValue),1)]}),!0)])):((0,a.uX)(),(0,a.CE)("span",p,(0,r.v_)(t.emptyValue),1)),(0,a.bF)(s.w,{class:"icon--hidden ml-2","aria-label":t.label,size:"x-small"},{default:(0,a.k6)((function(){return[(0,a.eW)(" mdi-lead-pencil ")]})),_:1},8,["aria-label"])],16)):((0,a.uX)(),(0,a.Wv)(i.D,(0,r._B)((0,a.v6)({key:1},l)),{default:(0,a.k6)((function(){return[(0,a.bF)(s.w,{start:""},{default:(0,a.k6)((function(){return[(0,a.eW)("mdi-plus")]})),_:1}),(0,a.eW)(" Add ")]})),_:2},1040))]})),default:(0,a.k6)((function(){return[(0,a.bF)(l.J,{"min-width":"250"},{default:(0,a.k6)((function(){return[(0,a.bF)(h,{"model-value":t.modelValue,"ok-text":"Save",onCancel:n[0]||(n[0]=function(n){return e.menu=!1}),onSave:n[1]||(n[1]=function(e){return b.save(e)})},{default:(0,a.k6)((function(n){var r=n.model,i=n.actions;return[(0,a.bF)(u.O,null,{default:(0,a.k6)((function(){return[(0,a.RG)(e.$slots,"input",{model:r},(function(){return[(0,a.bF)(f.W,{modelValue:r.value,"onUpdate:modelValue":function(e){return r.value=e},label:t.label,color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue","label"])]}),!0)]})),_:2},1024),(0,a.bF)(o.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(c.h),((0,a.uX)(),(0,a.Wv)((0,a.$y)(i),{color:"primary"}))]})),_:2},1024)]})),_:3},8,["model-value"])]})),_:3})]})),_:3},8,["modelValue"])}const k={name:"EditDialog",props:{modelValue:{type:[String,Object],required:!1},label:{type:String,required:!0},activator:{type:String,required:!1,default:"text"},emptyValue:{type:String,required:!1}},data:function(){return{menu:!1}},methods:{save:function(e){this.$emit("save",e),this.menu=!1}}};var b=t(64621);const h=(0,b.A)(k,[["render",v],["__scopeId","data-v-3daedc2c"]]),g=h},58488:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Z});t(62010);var a=t(20641),r=t(90033),i=t(53751),l=t(31969),u=t(13892),o=t(4189),c=t(30697),s=t(93745),d=t(91606),f=t(40276),m=t(87524),p=t(91772),v=t(43813),k=t(56756),b=t(35526),h=t(41720),g=t(79669),_=t(86449),x=t(69915),F=t(4529),w=t(57254),A=t(4913),D=t(98477),y=t(88249),W=t(56787),C=t(26106),V=t(10381),z=t(76686),O=t(43948),$=t(36048),T=t(81781),U={class:"section d-flex flex-column"},I={class:"header font-weight-medium text-h6 pa-8"},X={class:"pa-4 pt-2"},j={key:0,class:"text--secondary font-italic ml-4"},E={class:"pt-2"},S={key:0,class:"pt-2 pb-2 text-body-2"};function L(e,n,t,L,M,q){var N=(0,a.g2)("edit-dialog"),B=(0,a.g2)("individuals-table");return(0,a.uX)(),(0,a.Wv)(D.Y,{class:"mt-md-3"},{default:(0,a.k6)((function(){return[(0,a.bF)(W.L,{value:M.isLoading},{default:(0,a.k6)((function(){return[(0,a.bF)(C.x,{indeterminate:"",size:"64"})]})),_:1},8,["value"]),M.organization?((0,a.uX)(),(0,a.Wv)(v.I,{key:0},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",U,[(0,a.Lk)("h1",I,[(0,a.eW)((0,r.v_)(M.organization.name)+" ",1),(0,a.bF)(u.D,{onClick:n[0]||(n[0]=function(e){return q.confirmDelete(q.deleteOrganization,M.organization.name)})},{default:(0,a.k6)((function(){return[(0,a.bF)(g.w,{size:"small",start:""},{default:(0,a.k6)((function(){return[(0,a.eW)("mdi-delete")]})),_:1}),(0,a.eW)(" Delete ")]})),_:1})]),(0,a.bF)(k.L,{class:"mt-0 mb-0"},{default:(0,a.k6)((function(){return[(0,a.bF)(b.B,{sm:"12",md:"4",class:"border-right"},{default:(0,a.k6)((function(){return[(0,a.Lk)("section",X,[(0,a.bF)(_.w,{class:"d-flex justify-space-between text-subtitle-2 ml-4"},{default:(0,a.k6)((function(){return[(0,a.eW)(" Teams "),(0,a.bF)(N,{activator:"button",label:"Team name",onSave:n[1]||(n[1]=function(e){return q.addTeam(e)})})]})),_:1}),(0,a.bF)(x.x,{opened:M.teams.open,"onUpdate:opened":n[2]||(n[2]=function(e){return M.teams.open=e}),color:"primary",density:"compact",nav:"","onUpdate:selected":q.filterByTeam},{default:(0,a.k6)((function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(M.teams.items,(function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id},[e.children?((0,a.uX)(),(0,a.Wv)(F.K,{key:0,value:e.name},{activator:(0,a.k6)((function(n){var t=n.props;return[(0,a.bF)(w.g,(0,a.v6)(t,{onClickOnce:function(n){return q.loadChildren(e)},value:e}),{default:(0,a.k6)((function(){return[(0,a.bF)(A.U,{class:"d-flex justify-space-between align-center"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.name)+" ",1),(0,a.Lk)("div",null,[(0,a.bF)(y.q,{modelValue:e.menu,"onUpdate:modelValue":function(n){return e.menu=n},"close-on-content-click":!1},{activator:(0,a.k6)((function(e){var n=e.props;return[(0,a.bF)(u.D,(0,a.v6)(n,{"aria-label":"Add team",density:"comfortable",icon:"mdi-plus",size:"small",variant:"text"}),null,16)]})),default:(0,a.k6)((function(){return[(0,a.bF)(o.J,{"min-width":"200"},{default:(0,a.k6)((function(){return[(0,a.bF)(c.O,null,{default:(0,a.k6)((function(){return[(0,a.bF)(O.W,{modelValue:M.form.team,"onUpdate:modelValue":function(e){return M.form.team=e},label:"Team name",color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(u.D,{onClick:function(n){e.menu=!1,M.form.team=""}},{default:(0,a.k6)((function(){return[(0,a.eW)(" Cancel ")]})),_:2},1032,["onClick"]),(0,a.bF)(u.D,{onClick:function(n){q.addTeam(M.form.team,e),e.menu=!1}},{default:(0,a.k6)((function(){return[(0,a.eW)(" Save ")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,a.bF)(u.D,{"aria-label":"Delete team",density:"comfortable",icon:"mdi-delete",size:"small",variant:"text",onClick:(0,i.D$)((function(n){return q.confirmDelete(q.deleteTeam,e.name)}),["stop"])},null,8,["onClick"])])]})),_:2},1024)]})),_:2},1040,["onClickOnce","value"])]})),default:(0,a.k6)((function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.children,(function(e){return(0,a.uX)(),(0,a.Wv)(w.g,{key:e.id,value:e},{default:(0,a.k6)((function(){return[(0,a.bF)(A.U,{class:"d-flex justify-space-between align-center"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.name)+" ",1),(0,a.bF)(u.D,{"aria-label":"Delete team",class:"mr-7",density:"comfortable",icon:"mdi-delete",size:"small",variant:"text",onClick:(0,i.D$)((function(n){return q.confirmDelete(q.deleteTeam,e.name)}),["stop"])},null,8,["onClick"])]})),_:2},1024)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["value"])):((0,a.uX)(),(0,a.Wv)(w.g,{key:1,value:e},{default:(0,a.k6)((function(){return[(0,a.bF)(A.U,{class:"d-flex justify-space-between align-center"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.name)+" ",1),(0,a.Lk)("div",null,[(0,a.bF)(y.q,{modelValue:e.menu,"onUpdate:modelValue":function(n){return e.menu=n},"close-on-content-click":!1},{activator:(0,a.k6)((function(e){var n=e.props;return[(0,a.bF)(u.D,(0,a.v6)(n,{"aria-label":"Add team",density:"comfortable",icon:"mdi-plus",size:"small",variant:"text"}),null,16)]})),default:(0,a.k6)((function(){return[(0,a.bF)(o.J,{"min-width":"200"},{default:(0,a.k6)((function(){return[(0,a.bF)(c.O,null,{default:(0,a.k6)((function(){return[(0,a.bF)(O.W,{modelValue:M.form.team,"onUpdate:modelValue":function(e){return M.form.team=e},label:"Team name",color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(u.D,{onClick:function(n){e.menu=!1,M.form.team=""}},{default:(0,a.k6)((function(){return[(0,a.eW)(" Cancel ")]})),_:2},1032,["onClick"]),(0,a.bF)(u.D,{onClick:function(n){q.addTeam(M.form.team,e),e.menu=!1}},{default:(0,a.k6)((function(){return[(0,a.eW)(" Save ")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,a.bF)(u.D,{"aria-label":"Delete team",class:"mr-7",density:"comfortable",icon:"mdi-delete",size:"small",variant:"text",onClick:(0,i.D$)((function(n){return q.confirmDelete(q.deleteTeam,e.name)}),["stop"])},null,8,["onClick"])])]})),_:2},1024)]})),_:2},1032,["value"]))])})),128))]})),_:1},8,["opened","onUpdate:selected"]),0===M.teams.items.length?((0,a.uX)(),(0,a.CE)("p",j," No teams ")):(0,a.Q3)("",!0)])]})),_:1}),(0,a.bF)(b.B,{sm:"12",md:"8",class:"pl-md-0"},{default:(0,a.k6)((function(){return[(0,a.Lk)("section",E,[(0,a.bF)(V.h,{modelValue:M.tab,"onUpdate:modelValue":n[3]||(n[3]=function(e){return M.tab=e}),color:"primary"},{default:(0,a.k6)((function(){return[(0,a.bF)(z.U,{value:1,class:"ml-4"},{default:(0,a.k6)((function(){return[(0,a.eW)("Details")]})),_:1}),(0,a.bF)(z.U,{value:2},{default:(0,a.k6)((function(){return[(0,a.eW)(" Members "),(0,a.bF)(m.x,{size:"small",class:"ml-2"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(M.totalMembers),1)]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,a.bF)($.r3,{modelValue:M.tab,"onUpdate:modelValue":n[9]||(n[9]=function(e){return M.tab=e})},{default:(0,a.k6)((function(){return[(0,a.bF)(T.m,{value:1},{default:(0,a.k6)((function(){return[(0,a.bF)(v.I,null,{default:(0,a.k6)((function(){return[(0,a.bF)(x.x,null,{default:(0,a.k6)((function(){return[(0,a.bF)(_.w,{class:"d-flex justify-space-between text-subtitle-2"},{default:(0,a.k6)((function(){return[(0,a.eW)(" Domains "),(0,a.bF)(y.q,{modelValue:M.menu,"onUpdate:modelValue":n[7]||(n[7]=function(e){return M.menu=e}),"close-on-content-click":!1},{activator:(0,a.k6)((function(e){var n=e.props;return[(0,a.bF)(u.D,(0,a.v6)(n,{size:"small",variant:"outlined"}),{default:(0,a.k6)((function(){return[(0,a.bF)(g.w,{start:""},{default:(0,a.k6)((function(){return[(0,a.eW)("mdi-plus")]})),_:1}),(0,a.eW)(" Add ")]})),_:2},1040)]})),default:(0,a.k6)((function(){return[(0,a.bF)(o.J,{"min-width":"200"},{default:(0,a.k6)((function(){return[(0,a.bF)(c.O,null,{default:(0,a.k6)((function(){return[(0,a.bF)(_.w,{class:"pl-0 text-subtitle-2"},{default:(0,a.k6)((function(){return[(0,a.eW)(" New domain ")]})),_:1}),(0,a.bF)(O.W,{modelValue:M.form.domain,"onUpdate:modelValue":n[4]||(n[4]=function(e){return M.form.domain=e}),label:"Domain","single-line":"",density:"compact"},null,8,["modelValue"]),(0,a.bF)(f.a,{modelValue:M.form.isTopDomain,"onUpdate:modelValue":n[5]||(n[5]=function(e){return M.form.isTopDomain=e}),label:"Top domain",density:"compact","hide-details":""},null,8,["modelValue"])]})),_:1}),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(h.h),(0,a.bF)(u.D,{size:"small",onClick:n[6]||(n[6]=function(e){M.menu=!1,M.form.domain=null})},{default:(0,a.k6)((function(){return[(0,a.eW)(" Cancel ")]})),_:1}),(0,a.bF)(u.D,{size:"small",onClick:q.addDomain},{default:(0,a.k6)((function(){return[(0,a.eW)(" Save ")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(M.organization.domains,(function(e){return(0,a.uX)(),(0,a.Wv)(w.g,{key:e.id},{append:(0,a.k6)((function(){return[(0,a.bF)(u.D,{"aria-label":"Delete domain",size:"small",variant:"text",icon:"",onClick:function(n){return q.confirmDelete(q.deleteDomain,e.domain)}},{default:(0,a.k6)((function(){return[(0,a.bF)(g.w,{small:""},{default:(0,a.k6)((function(){return[(0,a.eW)("mdi-delete")]})),_:1})]})),_:2},1032,["onClick"])]})),default:(0,a.k6)((function(){return[(0,a.bF)(A.U,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.domain)+" ",1),e.isTopDomain?((0,a.uX)(),(0,a.Wv)(m.x,{key:0,class:"ml-2",color:"primary",size:"small"},{default:(0,a.k6)((function(){return[(0,a.eW)(" top domain ")]})),_:1})):(0,a.Q3)("",!0)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),(0,a.bF)(x.x,null,{default:(0,a.k6)((function(){return[(0,a.bF)(_.w,{class:"d-flex justify-space-between text-subtitle-2"},{default:(0,a.k6)((function(){return[(0,a.eW)(" Aliases "),(0,a.bF)(N,{activator:"button",label:"New alias",onSave:n[8]||(n[8]=function(e){return q.addAlias(e)})})]})),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(M.organization.aliases,(function(e,n){return(0,a.uX)(),(0,a.Wv)(w.g,{key:n},{append:(0,a.k6)((function(){return[(0,a.bF)(u.D,{"aria-label":"Delete alias",variant:"text",icon:"mdi-delete",onClick:function(n){return q.confirmDelete(q.deleteAlias,e.alias)}},null,8,["onClick"])]})),default:(0,a.k6)((function(){return[(0,a.bF)(A.U,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.alias),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1}),(0,a.bF)(T.m,{value:2,eager:""},{default:(0,a.k6)((function(){return[(0,a.bF)(v.I,{class:"pa-0"},{default:(0,a.k6)((function(){return[(0,a.bF)(B,{class:"mt-4","hide-header":"","fetch-page":q.fetchMembers,"delete-item":q.deleteIndividual,"merge-items":q.mergeIndividuals,"unmerge-items":function(){},"move-item":function(){},"add-identity":function(){},updateProfile:q.updateProfile,enroll:function(){},"fetch-organizations":function(){},"get-countries":function(){},"lock-individual":q.lockIndividual,"unlock-individual":q.unlockIndividual,"recommend-matches":function(){},"set-filters":M.filters,withdraw:function(){},"update-enrollment":function(){}},null,8,["fetch-page","delete-item","merge-items","updateProfile","lock-individual","unlock-individual","set-filters"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])]})),_:1})]})),_:1})])]})),_:1})):M.isLoading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(v.I,{key:1},{default:(0,a.k6)((function(){return[(0,a.bF)(l.l,{text:"",type:"error"},{default:(0,a.k6)((function(){return[(0,a.eW)("Organization "+(0,r.v_)(q.name)+" not found ",1)]})),_:1}),(0,a.bF)(u.D,{to:"/",color:"primary",depressed:""},{default:(0,a.k6)((function(){return[(0,a.bF)(g.w,{left:"",dark:""},{default:(0,a.k6)((function(){return[(0,a.eW)("mdi-arrow-left")]})),_:1}),(0,a.eW)(" Go to dashboard ")]})),_:1})]})),_:1})),(0,a.bF)(p.p,{modelValue:M.dialog.isOpen,"onUpdate:modelValue":n[10]||(n[10]=function(e){return M.dialog.isOpen=e}),"max-width":"500"},{default:(0,a.k6)((function(){return[(0,a.bF)(o.J,{class:"pa-3"},{default:(0,a.k6)((function(){return[(0,a.bF)(d.r,{class:"headline"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(M.dialog.title),1)]})),_:1}),(0,a.bF)(c.O,null,{default:(0,a.k6)((function(){return[M.dialog.text?((0,a.uX)(),(0,a.CE)("p",S,(0,r.v_)(M.dialog.text),1)):(0,a.Q3)("",!0)]})),_:1}),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(h.h),(0,a.bF)(u.D,{variant:"text",onClick:q.closeDialog},{default:(0,a.k6)((function(){return[(0,a.eW)(" Cancel ")]})),_:1},8,["onClick"]),(0,a.bF)(u.D,{color:M.dialog.color,id:"confirm",variant:"flat",onClick:(0,i.D$)(M.dialog.action,["stop"])},{default:(0,a.k6)((function(){return[(0,a.eW)(" Confirm ")]})),_:1},8,["color","onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var M=t(74721),q=t(14048),N=t(30388),B=(t(28706),t(88431),t(48980),t(62062),t(44114),t(54554),t(26099),t(58663)),K=t(20595),G=t(99206),J=t(52790);const P={name:"Organization",components:{IndividualsTable:G.A,EditDialog:J.A},data:function(){return{organization:{},isLoading:!0,teams:{items:[],open:[],menu:!1},totalMembers:0,dialog:{isOpen:!1,title:null,action:function(){},text:null,color:"primary"},form:{domain:null,isTopDomain:!0,team:null,alias:null},filters:null,tab:null,menu:!1}},computed:{name:function(){return decodeURIComponent(this.$route.params.name)}},methods:{fetchOrganization:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,B.SA)(n.$apollo,e);case 3:a=t.sent,a.data.organizations.entities.length>0&&Object.assign(n.organization,a.data.organizations.entities[0]),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n.$logger.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},confirmDelete:function(e,n){Object.assign(this.dialog,{isOpen:!0,action:function(){return e(n)},title:"Delete ".concat(n,"?"),color:"error"})},deleteOrganization:function(){var e=this;return(0,N.A)((0,q.A)().mark((function n(){var t;return(0,q.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,K.Dp)(e.$apollo,e.name);case 3:t=n.sent,t&&!t.errors&&e.$router.push({name:"Dashboard"}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),Object.assign(e.dialog,{text:n.t0});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},addDomain:function(){var e=this;return(0,N.A)((0,q.A)().mark((function n(){var t;return(0,q.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.menu=!1,e.form.domain){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,(0,K.sn)(e.$apollo,e.form.domain,e.form.isTopDomain,e.name);case 6:t=n.sent,e.organization.domains=[].concat((0,M.A)(e.organization.domains),[t.data.addDomain.domain]),e.form.domain=null,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),Object.assign(e.dialog,{isOpen:!0,title:"Error creating domain",text:e.$getErrorMessage(n.t0)});case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},deleteDomain:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a,r,i;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,K.Kr)(n.$apollo,e);case 3:a=t.sent,a&&!a.errors&&(r=(0,M.A)(n.organization.domains),i=r.findIndex((function(n){return n.domain===e})),r.splice(i,1),n.organization.domains=r,n.closeDialog()),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object.assign(n.dialog,{text:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchTeams:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a,r,i;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,B.ZN)(n.$apollo,{organization:null===(a=n.organization)||void 0===a?void 0:a.name,parent:e});case 2:return r=t.sent,i=r.data.teams.entities.map((function(e){return{id:e.id,name:e.name,children:e.numchild>0?[]:void 0}})),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))()},addTeam:function(e,n){var t=this;return(0,N.A)((0,q.A)().mark((function a(){return(0,q.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,K.Zs)(t.$apollo,e,t.name,null===n||void 0===n?void 0:n.name);case 3:n?(n.children=n.children||[],n.children.push({name:t.form.team,children:void 0})):t.teams.items.push({name:e,children:void 0}),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),Object.assign(t.dialog,{isOpen:!0,title:"Error creating team",text:t.$getErrorMessage(a.t0)});case 9:t.form.team=null;case 10:case"end":return a.stop()}}),a,null,[[0,6]])})))()},deleteTeam:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,K.To)(n.$apollo,e,n.name);case 3:a=t.sent,a&&!a.errors&&(n.removeTeamNode(e),n.closeDialog()),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object.assign(n.dialog,{text:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},removeTeamNode:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.teams.items;t.every((function(a,r){return a.name===e?(t.splice(r,1),!1):(a.children&&n.removeTeamNode(e,a.children),!0)}))},loadChildren:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.fetchTeams(e.name);case 2:e.children=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchMembers:function(){var e=arguments,n=this;return(0,N.A)((0,q.A)().mark((function t(){var a,r,i,l,u;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:1,r=e.length>1&&void 0!==e[1]?e[1]:10,i=e.length>2&&void 0!==e[2]?e[2]:{},l=e.length>3?e[3]:void 0,i.enrollment||(i=Object.assign(i,{enrollment:n.name})),t.next=7,(0,B.su)(n.$apollo,a,r,i,l);case 7:return u=t.sent,u&&!u.erros&&(n.totalMembers=u.data.individuals.pageInfo.totalResults),t.abrupt("return",u);case 10:case"end":return t.stop()}}),t)})))()},filterByTeam:function(e){var n=this;e[0]?this.$nextTick((function(){return n.filters='enrollment:"'.concat(e[0].name,'" enrollmentParentOrg:"').concat(n.name,'"')})):this.$nextTick((function(){return n.filters=null}))},deleteIndividual:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,K.Ut)(n.$apollo,e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},mergeIndividuals:function(e,n){var t=this;return(0,N.A)((0,q.A)().mark((function a(){var r;return(0,q.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,K.h1)(t.$apollo,e,n);case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}}),a)})))()},lockIndividual:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,K.pG)(n.$apollo,e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},unlockIndividual:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,K.Cr)(n.$apollo,e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},updateProfile:function(e,n){var t=this;return(0,N.A)((0,q.A)().mark((function a(){var r;return(0,q.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=(0,K.r7)(t.$apollo,e,n),a.abrupt("return",r);case 2:case"end":return a.stop()}}),a)})))()},closeDialog:function(){Object.assign(this.dialog,{isOpen:!1,title:"",action:function(){},color:"primary"})},addAlias:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,K.kX)(n.$apollo,e,n.name);case 5:a=t.sent,n.organization.aliases=[].concat((0,M.A)(n.organization.aliases),[a.data.addAlias.alias]),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),Object.assign(n.dialog,{isOpen:!0,title:"Error creating alias",text:n.$getErrorMessage(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},deleteAlias:function(e){var n=this;return(0,N.A)((0,q.A)().mark((function t(){var a,r,i;return(0,q.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,K.Gd)(n.$apollo,e);case 3:a=t.sent,a&&!a.errors&&(r=(0,M.A)(n.organization.aliases),i=r.findIndex((function(n){return n.alias===e})),r.splice(i,1),n.organization.aliases=r,n.closeDialog()),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object.assign(n.dialog,{text:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){var e=this;return(0,N.A)((0,q.A)().mark((function n(){return(0,q.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.fetchOrganization(e.name);case 2:return n.next=4,e.fetchTeams();case 4:e.teams.items=n.sent,e.isLoading=!1;case 6:case"end":return n.stop()}}),n)})))()}};var Q=t(64621);const R=(0,Q.A)(P,[["render",L],["__scopeId","data-v-18b153f8"]]),Z=R}}]);
//# sourceMappingURL=488.c1753ef6.js.map