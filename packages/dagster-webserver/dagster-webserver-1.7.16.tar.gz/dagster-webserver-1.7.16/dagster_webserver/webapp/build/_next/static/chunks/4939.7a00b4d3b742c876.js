"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4939],{36771:function(e,n,t){t.r(n),t.d(n,{CodeLocationsPage:function(){return em},CodeLocationsPageContent:function(){return ep},default:function(){return eg}});var o=t(52322),i=t(14934),r=t(74159),s=t(35292),l=t(74580),a=t(2784),c=t(9108),d=t(77265);let x=e=>{let n=[];for(let t of e){let e;let{locationOrLoadError:o}=t;e="LOADING"===t.loadStatus?o?"Updating":"Loading":(null==o?void 0:o.__typename)==="PythonError"?"Failed":"Loaded",o&&(null==o?void 0:o.__typename)!=="PythonError"?o.repositories.forEach(o=>{n.push({type:"repository",codeLocation:t,repository:o,status:e})}):n.push({type:"error",node:t,status:e})}return n},h=(e,n,t)=>{let o=n.toLocaleLowerCase();return e.filter(e=>{var n;return(null===(n=t.status)||void 0===n||!n.length||!!t.status.includes(e.status))&&("error"===e.type?e.node.name.toLocaleLowerCase().includes(o):e.codeLocation.name.toLocaleLowerCase().includes(o)||e.repository.name.toLocaleLowerCase().includes(o))})},u=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=x(e),i=h(o,n,t);return{flattened:o,filtered:i}};var j=t(4378),p=t(90483),m=t(74302),g=t(81602),f=t(100);let y=()=>{let e=(0,a.useContext)(f.C5),[n,t]=(0,a.useState)(""),i=(0,a.useCallback)(e=>{t(e.target.value)},[]),r=n.toLocaleLowerCase(),[s,l]=(0,j.q)({encode:e=>{let{status:n}=e;return{status:(null==n?void 0:n.length)?JSON.stringify(n):void 0}},decode:e=>({status:e.status?JSON.parse(e.status):[]})}),{flattened:c,filtered:d}=(0,a.useMemo)(()=>u(e.loading?[]:e.locationEntries,r,s),[e.loading,e.locationEntries,r,s]),x=(0,g.im)({name:"Status",icon:"tag",allValues:(0,a.useMemo)(()=>["Failed","Loaded","Updating","Loading"].map(e=>({key:e,value:e,match:[e]})),[]),menuWidth:"300px",renderLabel:e=>{let{value:n}=e;return(0,o.jsx)(p.rd,{text:n})},getStringValue:e=>e,state:s.status,onStateChanged:e=>{l({status:Array.from(e)})},matchType:"all-of",canSelectAll:!1,allowMultipleSelections:!0}),{button:h,activeFiltersJsx:y}=(0,m.m)({filters:[x]});return{button:h,activeFiltersJsx:y,onChangeSearch:i,loading:e.loading,flattened:c,filtered:d,searchValue:n}};var v=t(69737),w=t(20171),C=t(72447),b=t(79106),L=t(37483),E=t(88510),N=t(53664),I=t(38491),k=t(47933),O=t(35505),S=t(60603),V=t(55010),_=t(48936),z=t(92506),U=t(1747),P=t(20156),$=t(45984);let q=e=>{var n;let{locationNode:t}=e,[i,r]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),c=null,d=null;return(null===(n=t.locationOrLoadError)||void 0===n?void 0:n.__typename)==="RepositoryLocation"&&null!==t.locationOrLoadError.dagsterLibraryVersions&&(c=(0,o.jsx)(S.sN,{icon:"info",text:"View Dagster libraries",onClick:()=>l(!0)}),d=(0,o.jsx)(M,{libraries:t.locationOrLoadError.dagsterLibraryVersions,isOpen:s,setIsOpen:l})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(V.J,{position:"bottom-left",content:(0,o.jsxs)(S.v2,{children:[(0,o.jsx)(S.sN,{icon:"info",text:"View configuration",onClick:()=>r(!0)}),c]}),children:(0,o.jsx)(I.zx,{icon:(0,o.jsx)(_.JO,{name:"expand_more"})})}),(0,o.jsx)(D,{metadata:t.displayMetadata,isOpen:i,setIsOpen:r}),d]})},D=e=>{let{isOpen:n,setIsOpen:t,metadata:i}=e;return(0,o.jsxs)(z.Vq,{title:"Code location configuration",icon:"info",isOpen:n,onClose:()=>t(!1),style:{width:"600px"},children:[(0,o.jsx)(F,{displayMetadata:i}),(0,o.jsx)(z.cN,{topBorder:!0,children:(0,o.jsx)(I.zx,{onClick:()=>t(!1),intent:"primary",children:"Done"})})]})},M=e=>{let{isOpen:n,setIsOpen:t,libraries:i}=e;return(0,o.jsxs)(z.Vq,{title:"Dagster library versions",icon:"info",isOpen:n,onClose:()=>t(!1),style:{width:"600px"},children:[(0,o.jsxs)(U.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Library"}),(0,o.jsx)("th",{children:"Version"})]})}),(0,o.jsx)("tbody",{children:i.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.name}),(0,o.jsx)("td",{children:e.version})]},e.name))})]}),(0,o.jsx)(z.cN,{topBorder:!0,children:(0,o.jsx)(I.zx,{onClick:()=>t(!1),intent:"primary",children:"Done"})})]})},F=e=>{let{displayMetadata:n}=e,t=(0,a.useMemo)(()=>{let e=n.reduce((e,n)=>(e[n.key]=n.value,e),{});return $.Pz(e)},[n]);return(0,o.jsx)(P.u,{value:t,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})};var H=t(35002),T=t(39013),A=t(43212),R=t(89891),J=t(81306),W=t(50309),Z=t(85227),B=t(22203),G=t(68954);let Q=e=>{let{metadata:n}=e,t=(0,Z.m)(),i=n.find(e=>{let{key:n}=e;return"image"===n}),r=(null==i?void 0:i.value)||"",s=(0,a.useCallback)(async()=>{t(r),await (0,W.B7)({intent:"success",icon:"done",message:"Image string copied!"})},[t,r]);return i?(0,o.jsxs)(X,{flex:{direction:"row",gap:4},children:[(0,o.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,o.jsx)(H.u,{content:"Click to copy",placement:"top",display:"block",children:(0,o.jsx)("button",{onClick:s,children:(0,o.jsx)(N.g,{text:i.value})})})]}):null},X=(0,O.ZP)(i.x).withConfig({componentId:"sc-cd1ba75a-0"})(["width:100%;color:",";font-size:12px;.bp4-popover2-target{overflow:hidden;}button{background:",";border:none;color:",";cursor:pointer;font-size:12px;overflow:hidden;padding:0;margin:0;width:100%;:focus{outline:none;}}"],T.$(),T.v8(),T.$()),K=e=>{let{metadata:n}=e,t=n.find(e=>{let{key:n}=e;return"module_name"===n||"package_name"===n||"python_file"===n});return t?(0,o.jsxs)(i.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:T.$(),fontSize:12},children:[(0,o.jsxs)("span",{style:{fontWeight:500},children:[t.key,":"]}),(0,o.jsx)(N.g,{text:t.value})]}):null},Y=e=>{var n;let{location:t,locationOrError:r}=e,[s,l]=(0,a.useState)(!1),c=(0,a.useMemo)(()=>(0,G.je)(t),[t]),{reloading:d,tryReload:x}=(0,G.Dc)({scope:"location",reloadFn:c});return"LOADING"===r.loadStatus?r.locationOrLoadError?(0,o.jsx)(A.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,o.jsx)(A.V,{minimal:!0,intent:"primary",children:"Loading..."}):(null===(n=r.locationOrLoadError)||void 0===n?void 0:n.__typename)==="PythonError"?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.x,{flex:{alignItems:"center",gap:12},children:[(0,o.jsx)(A.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,o.jsx)(R.Z,{onClick:()=>l(!0),children:(0,o.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,o.jsx)(J.p,{location:t,isOpen:s,error:r.locationOrLoadError,reloading:d,onDismiss:()=>l(!1),onTryReload:()=>x()})]}):(0,o.jsx)(A.V,{minimal:!0,intent:"success",children:"Loaded"})},ee=e=>{let{location:n}=e;return(0,o.jsx)(B.s,{location:n,ChildComponent:e=>{let{reloading:n,tryReload:t,hasReloadPermission:r}=e;return(0,o.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,o.jsx)(H.u,{content:r?"":B.H,canShow:!r,useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(I.zx,{icon:(0,o.jsx)(_.JO,{name:"refresh"}),disabled:!r,loading:n,onClick:()=>t(),children:"Reload"})})})}})};var en=t(10539),et=t(44900);let eo=e=>{let{repo:n,repoAddress:t}=e,r=n.assetGroups.length,s=n.pipelines.filter(e=>{let{name:n}=e;return!(0,et.pv)(n)}).length,l=n.schedules.length,a=n.sensors.length;return(0,o.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(H.u,{content:1===r?"1 asset group":"".concat(r," asset groups"),placement:"top",children:(0,o.jsx)(ei,{to:(0,en.$U)(t,"/assets"),children:(0,o.jsx)(A.V,{interactive:!0,icon:"asset_group",children:r})})}),(0,o.jsx)(H.u,{content:1===s?"1 job":"".concat(s," jobs"),placement:"top",children:(0,o.jsx)(ei,{to:(0,en.$U)(t,"/jobs"),children:(0,o.jsx)(A.V,{interactive:!0,icon:"job",children:s})})}),(0,o.jsx)(H.u,{content:1===l?"1 schedule":"".concat(l," schedules"),placement:"top",children:(0,o.jsx)(ei,{to:(0,en.$U)(t,"/schedules"),children:(0,o.jsx)(A.V,{interactive:!0,icon:"schedule",children:l})})}),(0,o.jsx)(H.u,{content:1===a?"1 sensor":"".concat(a," sensors"),placement:"top",children:(0,o.jsx)(ei,{to:(0,en.$U)(t,"/sensors"),children:(0,o.jsx)(A.V,{interactive:!0,icon:"sensors",children:a})})})]})},ei=(0,O.ZP)(k.rU).withConfig({componentId:"sc-b34b9578-0"})([":hover,:active{outline:none;text-decoration:none;}"]);var er=t(65822),es=t(22563),el=t(35599),ea=t(17008);let ec="3fr 1fr 1fr 240px 160px",ed=a.forwardRef((e,n)=>{let{locationNode:t,index:i}=e,{name:r}=t;return(0,o.jsx)("div",{ref:n,"data-index":i,children:(0,o.jsxs)(eu,{border:"bottom",children:[(0,o.jsx)(ea.E5,{children:(0,o.jsx)(N.g,{text:r})}),(0,o.jsx)(ea.E5,{children:(0,o.jsx)("div",{children:(0,o.jsx)(Y,{location:r,locationOrError:t})})}),(0,o.jsx)(ea.E5,{children:(0,o.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,o.jsx)(el.C,{unixTimestamp:t.updatedTimestamp})})}),(0,o.jsx)(ea.E5,{children:"–"}),(0,o.jsx)(ea.E5,{children:(0,o.jsxs)(I.zH,{children:[(0,o.jsx)(ee,{location:r}),(0,o.jsx)(q,{locationNode:t})]})})]})})}),ex=a.forwardRef((e,n)=>{let{codeLocation:t,repository:r,index:s}=e,l=(0,er.kQ)(r.name,r.location.name),a=[...t.displayMetadata,...r.displayMetadata];return(0,o.jsx)("div",{ref:n,"data-index":s,children:(0,o.jsxs)(eu,{border:"bottom",children:[(0,o.jsx)(ea.E5,{children:(0,o.jsxs)(i.x,{flex:{direction:"column",gap:4},children:[(0,o.jsx)("div",{style:{fontWeight:500},children:(0,o.jsx)(k.rU,{to:(0,en.$U)(l),children:(0,o.jsx)(N.g,{text:(0,es.Uz)(l)})})}),(0,o.jsx)(Q,{metadata:a}),(0,o.jsx)(K,{metadata:a})]})}),(0,o.jsx)(ea.E5,{children:(0,o.jsx)("div",{children:(0,o.jsx)(Y,{location:r.name,locationOrError:t})})}),(0,o.jsx)(ea.E5,{children:(0,o.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,o.jsx)(el.C,{unixTimestamp:t.updatedTimestamp})})}),(0,o.jsx)(ea.E5,{children:(0,o.jsx)(eo,{repo:r,repoAddress:l})}),(0,o.jsx)(ea.E5,{style:{alignItems:"flex-end"},children:(0,o.jsxs)(I.zH,{children:[(0,o.jsx)(ee,{location:t.name}),(0,o.jsx)(q,{locationNode:t})]})})]})})}),eh=()=>(0,o.jsxs)(ea.VJ,{templateColumns:ec,sticky:!0,children:[(0,o.jsx)(ea.qN,{children:"Name"}),(0,o.jsx)(ea.qN,{children:"Status"}),(0,o.jsx)(ea.qN,{children:"Updated"}),(0,o.jsx)(ea.qN,{children:"Definitions"}),(0,o.jsx)(ea.qN,{style:{textAlign:"right"},children:"Actions"})]}),eu=(0,O.ZP)(i.x).withConfig({componentId:"sc-311cbf1d-0"})(["display:grid;grid-template-columns:",";"],ec),ej=e=>{var n,t;let{loading:r,codeLocations:s,searchValue:l}=e,c=(0,a.useRef)(null),d=(0,E.MG)({count:s.length,getScrollElement:()=>c.current,estimateSize:()=>64,overscan:10}),x=d.getTotalSize(),h=d.getVirtualItems();return r&&!s.length?(0,o.jsxs)(i.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,o.jsx)(b.$,{purpose:"body-text"}),(0,o.jsx)("div",{children:"Loading…"})]}):s.length?(0,o.jsxs)(ea.W2,{ref:c,children:[(0,o.jsx)(eh,{}),(0,o.jsx)(ea.Nh,{$totalHeight:x,children:(0,o.jsx)(ea.HR,{$start:null!==(t=null===(n=h[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0,children:h.map(e=>{let{index:n,key:t}=e,i=s[n];return"error"===i.type?(0,o.jsx)(ed,{index:n,locationNode:i.node,ref:d.measureElement},t):(0,o.jsx)(ex,{index:n,codeLocation:i.codeLocation,repository:i.repository,ref:d.measureElement},t)})})})]}):l?(0,o.jsx)(i.x,{padding:{vertical:32},children:(0,o.jsx)(L.t,{icon:"folder",title:"No matching code locations",description:(0,o.jsxs)("div",{children:["No code locations were found for search query ",(0,o.jsx)("strong",{children:l}),"."]})})}):(0,o.jsx)(i.x,{padding:{vertical:32},children:(0,o.jsx)(L.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},ep=()=>{(0,v.Px)(),(0,w.j)("Code locations");let{activeFiltersJsx:e,flattened:n,button:t,loading:l,filtered:a,onChangeSearch:c,searchValue:d}=y(),x=n.length,h=x>10;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[(0,o.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[t,h?(0,o.jsx)(r.oi,{icon:"search",value:d,onChange:c,placeholder:"Filter code locations by name…",style:{width:"400px"}}):(0,o.jsx)(s.pm,{id:"repository-locations",children:l||!x?"Code locations":1===x?"1 code location":"".concat(x," code locations")})]}),(0,o.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[h?(0,o.jsx)("div",{children:"".concat(x," code locations")}):null,(0,o.jsx)(C.i,{})]})]}),(0,o.jsx)(ej,{loading:l,codeLocations:a,searchValue:d}),e.length?(0,o.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},padding:{top:8,horizontal:24},children:e}):null]})},em=()=>{let{pageTitle:e}=a.useContext(c.N);return(0,o.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(l.m,{title:(0,o.jsx)(s.X6,{children:e}),tabs:(0,o.jsx)(d.Z,{tab:"locations"})}),(0,o.jsx)(ep,{})]})};var eg=em},35232:function(e,n,t){t.d(n,{_:function(){return a}});var o=t(73235),i=t(40794),r=t(89130),s=t(34219);function l(){let e=(0,o._)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"]);return l=function(){return e},e}let a=()=>{var e;let n=(0,i.a)(c);return(0,s.Hu)(n,"InstanceConfigHasInfoQuery"),!!(null===(e=n.data)||void 0===e?void 0:e.instance.hasInfo)},c=(0,r.Ps)(l())}}]);
//# sourceMappingURL=4939.7a00b4d3b742c876.js.map