(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[9680],{39680:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(74389),a=n(31529),i=n(93345),o=n(60162),s=n.n(o),l=n(23446),d=n(50224),u=n(67737),g=n(55304),h=n(19335),y=n(4426),c=n(47355),f=n(93178),m=n(20428),b=n(64511),p=n(6934),w=n(64136);const C=(0,a.debounce)((({visibleRange:e,chunkSizes:t,data:n,widgetName:r,onQueryRangesChanged:a})=>{if(!t)return;const i={};let o=!1;(0,b.W)(t).forEach((([a,s])=>{if(void 0===s)throw new Error(`Undefined chunkSize for the axis "${a}" in the lazy loading configuration of "${r}". This is not supported.\nEncountered widgetPlugin.lazyLoading.chunkSizes = ${JSON.stringify(t,void 0,2)}`);const l=m.U[a],d=n.axes.find((e=>e.id===l)),u=d?.range,g=e[a].from,h=e[a].to;if(!u||u.entireAxis)i[l]={from:0,to:s-1};else if(g>=u.from&&h<=u.to)i[l]={from:u.from,to:u.to};else{const e=g+Math.floor((h-g)/2),t=Math.max(0,Math.min(u.axisLength-s,e-Math.ceil(s/2))),n=Math.min(t+s,u.axisLength);i[l]={from:t,to:n},o=o||t!==u.from||n!==u.to}})),o&&a(i)}),300),S=e=>{const{data:t,widgetState:n,onQueryRangesChanged:a}=e,o=n.switchedTo??n.widgetKey,[s]=(0,c.useWidgetPlugins)([o]),l=s?.lazyLoading?.chunkSizes,d=(0,p.useWidgetName)(n),u=(0,i.useCallback)((e=>C({visibleRange:e,chunkSizes:l,data:t,widgetName:d,onQueryRangesChanged:a})),[l,t,d,a]);return(0,r.Y)(w.p,{...e,onVisibleRangeChanged:u})};var v=n(3978),x=n(29680);const W=e=>e,k=(0,i.memo)((e=>{(0,v.useCallOnLoadedAfterFirstProperRender)(e);const{queryResult:t,onSelectionChange:n,widgetState:a}=e,{widgetKey:o}=e.widgetState,[s]=(0,c.useWidgetPlugins)([o]),d=(0,p.useWidgetName)(a);(0,i.useMemo)((()=>{(0,g.K)(d,a.style?.measures)}),[a.style?.measures,d]);const[m]=(0,h.W0)([s?.cell]),[b]=(0,y.n6)([s?.cellStyle]),w=(0,i.useCallback)((b?.withCellStyle??W)(m?.Cell??f.Y),[m,b]);w.displayName="WithCellStyle";const C=(0,p.useFilters)(a),k=(0,i.useMemo)((()=>Object.values(C).some((e=>e.some(u.t)))),[C]);if((0,p.isMappingEmpty)(a.mapping)&&!k)return(0,r.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,reason:"noQuery"});if(!t.isLoading&&t.error){if((0,l.isErrorInQueryResultOfType)(t.error,"QueryTimeoutException"))throw new l.QueryTimeoutError(t.error);throw new l.QueryError(t.error)}return(0,r.Y)(p.WidgetLoadingOverlay,{isLoading:t.isLoading,children:t.data&&t.data.cells.length>0?(0,r.Y)(S,{Cell:w,containerStyle:e.style,data:t.data,isRowHeaderTree:e.isRowHeaderTree,onChange:e.onChange,onSelectionChange:n,widgetState:e.widgetState,onQueryRangesChanged:e.onQueryRangesChanged}):(0,r.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,reason:0===t.data?.cells.length?"noData":"noQuery"})})}),((e,t)=>{if((0,p.isWidgetInDashboard)(t)!==(0,p.isWidgetInDashboard)(e))return!1;if((0,p.isWidgetInDashboard)(t)&&(0,p.isWidgetInDashboard)(e)){const{dashboardState:n,...r}=(0,a.omit)(e,"onDashboardChange"),{dashboardState:i,...o}=(0,a.omit)(t,"onDashboardChange"),l=(0,d.W)(n,e.pageKey),u=(0,d.W)(i,t.pageKey);return s()(r,o)&&n.filters===i.filters&&l?.filters===u?.filters&&n.queryContext===i.queryContext&&l?.queryContext===u?.queryContext}return s()(e,t)}))},60162:e=>{e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var d=i[l];if(!s(d))return!1;var u=e[d],g=t[d];if(!1===(a=n?n.call(r,u,g,d):void 0)||void 0===a&&u!==g)return!1}return!0}}}]);