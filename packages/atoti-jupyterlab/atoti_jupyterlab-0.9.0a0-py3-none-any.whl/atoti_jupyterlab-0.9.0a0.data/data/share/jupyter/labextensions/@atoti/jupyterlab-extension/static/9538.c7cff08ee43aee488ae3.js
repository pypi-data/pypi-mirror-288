/*! For license information please see 9538.c7cff08ee43aee488ae3.js.LICENSE.txt */
"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[9538,4389,6770,9151,5723,7157],{89538:(e,r,t)=>{t.r(r),t.d(r,{canOpenDrillthroughOnSelection:()=>g,getDrillthroughWidgetFilters:()=>_,pluginMenuItemOpenDrillthrough:()=>x});var n=t(74389),o=t(93345),i=t(95889),l=t(4654),a=t(23446),s=t(96678),u=t(36627),c=t(33603),h=t(67737),d=t(46102),m=t(63719),f=t(6934);function g(e){return void 0!==e&&!(e.axes&&e.axes.length>0)&&void 0!==e.cells&&1===e.cells.length&&void 0!==e.cells[0].value}var p=t(64166),y=t(7994);function b(e,r){const{dimensionName:t,hierarchyName:n}=e;return r.some((e=>(0,y.q)(e,{dimensionName:t,hierarchyName:n})))}function _({sourceWidgetFilters:e,tuple:r}){return[...(e||[]).filter((e=>!b(e,r))),...r.map((({dimensionName:e,hierarchyName:r,namePath:t})=>({type:"members",dimensionName:e,hierarchyName:r,members:[t]})))]}const x={key:"open-drillthrough",useMenuItem:e=>{const{selection:r,widgetState:t}=e,{cube:y}=(0,f.useCube)(t),{formatMessage:x}=(0,i.useIntl)(),v=(0,s.g)(),C=(0,o.useMemo)((()=>{if(g(r))return r.cells[0].tuple.filter((e=>(0,h.t)(e)||!(0,a.isTotal)((0,d.q)(e,y),e)))}),[y,r]),D=(0,o.useMemo)((()=>{if(C){const e=C.filter((e=>!(0,h.t)(e)));return x({id:"aui.plugins.menu-item.open-drillthrough.openDrillthrough"},{member:e.length>0?(0,a.getTupleCaption)(e,{captionForTotals:x({id:"aui.total"}),cube:y,separator:", ",hasOnlyCaptionForLeafLevels:!0}):void 0})}}),[x,C,y]),O=(0,o.useCallback)((async()=>{if(v&&D&&C&&(0,l.M)(e)){const r=(0,u.z)(e.dashboardState.pagesOrder),n=e.dashboardState.pagesOrder.indexOf(v),o=e.dashboardState.pages[v];if(void 0===t.query.mdx)return;const i=function({name:e,sourceWidget:r,sourceWidgetPage:t,tuple:n,cube:o}){const i=_({sourceWidgetFilters:r.filters,tuple:n}),l={mdx:(0,f.getDefaultMdxDrillthrough)(o.name)};r.query.mdx&&r.query.mdx.withClause&&(l.mdx.select.withClause=r.query.mdx.withClause);const a=(t.filters||[]).filter((e=>!b(e,n)));return{name:e,content:{0:{...p._.initialState,shouldUseDefaultColumns:!0,query:l,serverKey:r.serverKey,initialCubeName:o.name,filters:i}},layout:{direction:"column",children:[{leafKey:"0",size:1}]},filters:a}}({name:D,sourceWidget:t,sourceWidgetPage:o,tuple:C,cube:y}),l=(0,c.H)(e.dashboardState,{page:i,key:r,index:n+1});e.onDashboardChange(l),e.onActivePageChange(r)}}),[v,y,D,e,C,t]);if((0,l.M)(e)&&C&&t.query.mdx)return{icon:(0,n.Y)(m.IconDrillthrough,{}),label:D,onClick:O}},translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"},"fr-FR":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {sur {member}}\n          }"}}}},74389:(e,r,t)=>{t.d(r,{FD:()=>a,FK:()=>i,Y:()=>l});var n=t(65723),o=t(42369),i=(t(93345),t(77619),t(4674),t(21880),t(48785),n.Fragment);function l(e,r,t){return o.h.call(r,"css")?n.jsx(o.E,(0,o.c)(e,r),t):n.jsx(e,r,t)}function a(e,r,t){return o.h.call(r,"css")?n.jsxs(o.E,(0,o.c)(e,r),t):n.jsxs(e,r,t)}},62921:(e,r,t)=>{var n=t(93345),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,i={},u=null,c=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(c=r.ref),r)l.call(r,n)&&!s.hasOwnProperty(n)&&(i[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===i[n]&&(i[n]=r[n]);return{$$typeof:o,type:e,key:u,ref:c,props:i,_owner:a.current}}r.Fragment=i,r.jsx=u,r.jsxs=u},65723:(e,r,t)=>{e.exports=t(62921)}}]);